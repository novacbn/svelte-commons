{"version":3,"sources":["util/shared/functional.ts","actions/browser/element.ts","actions/browser/index.ts","actions/index.ts","../node_modules/svelte/internal/index.mjs","../node_modules/svelte/store/index.mjs","util/shared/string.ts","util/shared/browser.ts","util/shared/context.ts","util/shared/stores.ts","util/shared/url.ts","util/shared/index.ts","util/browser/location.ts","util/browser/index.ts","util/index.ts","stores/browser/location.ts","stores/browser/storage.ts","stores/browser/index.ts","stores/shared/collection.ts","stores/shared/overlay.ts","stores/shared/immutable.ts","stores/shared/merged.ts","../node_modules/tv4/tv4.js","stores/shared/schema.ts","stores/shared/index.ts","stores/index.ts","index.ts"],"names":["noop","identity","x","assign","tar","src","k","is_promise","value","then","add_location","element","file","line","column","char","__svelte_meta","loc","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","not_equal","validate_store","store","name","subscribe","Error","callback","unsub","unsubscribe","get_store_value","_","component_subscribe","component","$$","on_destroy","push","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","slice","get_slot_changes","dirty","lets","merged","len","Math","max","length","i","exclude_internal_props","props","result","once","ran","args","call","null_to_empty","set_store_value","ret","set","has_prop","obj","prop","prototype","hasOwnProperty","action_destroyer","action_result","destroy","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","set_now","set_raf","tasks","Set","run_tasks","task","c","delete","f","size","clear_loops","clear","loop","promise","Promise","fulfill","add","abort","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","document","createElement","element_is","is","object_without_properties","exclude","indexOf","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","prevent_default","preventDefault","stop_propagation","stopPropagation","self","attr","attribute","removeAttribute","getAttribute","setAttribute","set_attributes","attributes","descriptors","getOwnPropertyDescriptors","__proto__","key","style","cssText","set_svg_attributes","set_custom_element_data","xlink_attr","setAttributeNS","get_binding_group_value","group","checked","__value","to_number","undefined","time_ranges_to_array","ranges","array","start","end","children","Array","from","childNodes","claim_element","nodes","svg","nodeName","j","splice","claim_text","nodeType","claim_space","set_data","set_input_value","input","set_input_type","type","e","set_style","important","setProperty","select_option","select","option","selected","select_options","select_value","selected_option","querySelector","select_multiple_value","map","querySelectorAll","add_resize_listener","getComputedStyle","position","object","win","tabIndex","onload","contentDocument","defaultView","test","navigator","userAgent","cancel","toggle_class","toggle","classList","custom_event","detail","createEvent","initCustomEvent","query_selector_all","selector","parent","body","HtmlTag","constructor","html","u","m","n","t","innerHTML","p","stylesheet","current_component","active","current_rules","hash","str","charCodeAt","create_rule","duration","delay","ease","uid","step","keyframes","rule","head","sheet","insertRule","cssRules","animation","delete_rule","split","filter","anim","join","clear_rules","deleteRule","create_animation","params","to","getBoundingClientRect","left","right","top","bottom","easing","start_time","tick","css","running","started","stop","fix_position","width","height","add_transform","transform","set_current_component","get_current_component","beforeUpdate","before_update","onMount","on_mount","afterUpdate","after_update","onDestroy","createEventDispatcher","callbacks","setContext","context","getContext","get","bubble","dirty_components","intros","enabled","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","resolve","update_scheduled","schedule_update","flush","add_render_callback","add_flush_callback","seen_callbacks","shift","update","pop","has","fragment","wait","dispatch","direction","kind","dispatchEvent","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","null_transition","create_in_transition","config","animation_name","cleanup","go","end_time","invalidate","create_out_transition","reset","create_bidirectional_transition","intro","running_program","pending_program","clear_animation","init","program","abs","handle_promise","info","token","index","resolved","child_ctx","current","needs_flush","blocks","mount","error","catch","pending","globals","global","destroy_block","lookup","outro_and_destroy_block","fix_and_destroy_block","fix_and_outro_and_destroy_block","update_keyed_each","old_blocks","get_key","dynamic","list","create_each_block","next","get_context","old_indexes","new_blocks","new_lookup","Map","deltas","will_move","did_move","first","new_block","old_block","new_key","old_key","measure","rects","get_spread_update","levels","updates","to_null_out","accounted_for","get_spread_object","spread_props","boolean_attributes","invalid_attribute_name_character","spread","classes_to_add","class","keys","toLowerCase","String","replace","escaped","escape","match","each","items","missing_component","$$render","validate_component","debug","values","console","log","SvelteElement","create_ssr_component","bindings","slots","parent_component","render","title","code","add_attribute","boolean","JSON","stringify","add_classes","classes","bind","bound","create_component","claim_component","parent_nodes","l","mount_component","new_on_destroy","destroy_component","make_dirty","fill","instance","create_fragment","prop_values","ready","rest","hydrate","HTMLElement","attachShadow","mode","connectedCallback","slotted","attributeChangedCallback","_oldValue","newValue","$destroy","$on","$set","SvelteComponent","dispatch_dev","version","append_dev","insert_dev","detach_dev","detach_between_dev","before","after","nextSibling","detach_before_dev","previousSibling","detach_after_dev","listen_dev","has_prevent_default","has_stop_propagation","modifiers","dispose","attr_dev","prop_dev","property","dataset_dev","dataset","set_data_dev","SvelteComponentDev","$$inline","warn","loop_guard","timeout","subscriber_queue","readable","writable","subscribers","new_value","run_queue","s","subscriber","derived","stores","initial_value","single","isArray","stores_array","auto","inited","sync","unsubscribers","factory","define","amd","module","exports","tv4","hasDontEnumBug","dontEnums","dontEnumsLength","toString","propertyIsEnumerable","TypeError","F","arguments","vArg","searchElement","Number","Infinity","floor","isFrozen","random","uriTemplateGlobalModifiers","uriTemplateSuffices","notReallyPercentEncode","string","encodeURI","doubleEncoded","substring","uriTemplateSubstitution","spec","modifier","charAt","separator","prefix","shouldEscape","showVariables","trimEmptyString","varNames","varList","varSpecs","varSpecMap","varName","truncate","parts","parseInt","suffices","varSpec","subFunction","valueFunction","startIndex","encodeURIComponent","substitution","UriTemplate","template","textParts","prefixes","substitutions","part","remainder","funcs","concat","fillFromObject","ValidatorContext","collectMultiple","errorReporter","checkRecursive","trackUnknownProperties","missing","missingMap","formatValidators","schemas","errors","handleError","collectError","returnError","scanned","scannedFrozen","scannedFrozenSchemas","scannedFrozenValidationErrors","validatedSchemasKey","validationErrorsKey","knownPropertyPaths","unknownPropertyPaths","defaultErrorReporter","definedKeywords","recursiveCompare","A","B","defineKeyword","keyword","keywordFunction","createError","messageParams","dataPath","schemaPath","subErrors","schema","ValidationError","message","prefixErrors","prefixWith","banUnknownProperties","unknownPath","ErrorCodes","UNKNOWN_PROPERTY","path","addFormat","format","validator","resolveRefs","urlHistory","CIRCULAR_REFERENCE","urls","getSchema","url","baseUrl","pointerPath","decodeURIComponent","searchSchemas","id","isTrustedUrl","testUrl","uri","getDocumentUri","addSchema","normSchema","getSchemaMap","getSchemaUris","filterRegExp","getMissingUris","dropSchemas","validateAll","dataPathParts","schemaPathParts","dataPointerPath","topLevel","startErrorCount","frozenIndex","scannedFrozenSchemaIndex","scannedSchemasIndex","schemaIndex","frozenSchemaIndex","defineProperty","configurable","errorCount","validateBasic","validateNumeric","validateString","validateArray","validateObject","validateCombinations","validateHypermedia","validateFormat","validateDefinedKeywords","dataPart","schemaPart","errorMessage","FORMAT_CUSTOM","validationFunctions","func","KEYWORD_CUSTOM","validateType","validateEnum","dataType","allowedTypes","INVALID_TYPE","expected","ENUM_MISMATCH","validateMultipleOf","validateMinMax","validateNaN","CLOSE_ENOUGH_LOW","pow","CLOSE_ENOUGH_HIGH","parseURI","href","protocol","authority","host","hostname","port","pathname","search","resolveUrl","base","lastIndexOf","output","removeDotSegments","baseUri","language","errorMessages","languages","messageTemplate","ErrorMessagesDefault","whole","subValue","multipleOf","divisibleBy","NUMBER_MULTIPLE_OF","minimum","NUMBER_MINIMUM","exclusiveMinimum","NUMBER_MINIMUM_EXCLUSIVE","maximum","NUMBER_MAXIMUM","exclusiveMaximum","NUMBER_MAXIMUM_EXCLUSIVE","isNaN","NUMBER_NOT_A_NUMBER","validateStringLength","validateStringPattern","minLength","STRING_LENGTH_SHORT","maxLength","STRING_LENGTH_LONG","pattern","RegExp","regexp","flags","literal","STRING_PATTERN","validateArrayLength","validateArrayUniqueItems","validateArrayItems","minItems","ARRAY_LENGTH_SHORT","maxItems","ARRAY_LENGTH_LONG","uniqueItems","ARRAY_UNIQUE","match1","match2","additionalItems","ARRAY_ADDITIONAL_ITEMS","validateObjectMinMaxProperties","validateObjectRequiredProperties","validateObjectProperties","validateObjectDependencies","minProperties","OBJECT_PROPERTIES_MINIMUM","propertyCount","maxProperties","OBJECT_PROPERTIES_MAXIMUM","required","OBJECT_REQUIRED","keyPointerPath","foundMatch","properties","patternProperties","patternKey","additionalProperties","OBJECT_ADDITIONAL_PROPERTIES","dependencies","depKey","dep","OBJECT_DEPENDENCY_KEY","requiredKey","validateAllOf","validateAnyOf","validateOneOf","validateNot","allOf","subSchema","anyOf","oldUnknownPropertyPaths","oldKnownPropertyPaths","errorAtEnd","knownKey","unknownKey","ANY_OF_MISSING","oneOf","validIndex","ONE_OF_MULTIPLE","index1","index2","ONE_OF_MISSING","not","oldErrorCount","notErrors","NOT_PASSED","links","ldo","rel","allPresent","schemaUrl","ErrorCodeLookup","err","stack","stacktrace","dataPrefix","schemaPrefix","createApi","globalContext","currentLanguage","customErrorReporter","api","setErrorReporter","reporter","apply","addLanguage","messageMap","rootCode","freshApi","validate","def","valid","validateResult","validateMultiple","defineError","codeName","codeNumber","defaultMessage","langCode","errorCodes"],"mappings":"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","file":"svelte-commons.umd.js","sourceRoot":"../src","sourcesContent":["/**\n * Represents the predicate filter, function, or `Array` index used in `filter_collection` / `find_collection` / `reject_collection`\n */\nexport type IPredicatePartial<T> = ((value: T, index: number) => boolean) | Partial<T> | number;\n\n/**\n * Represents the mapping value or function used in `map_collection`\n */\nexport type IMapperPartial<T> = ((value: T, index: number) => Partial<T>) | Partial<T>;\n\n/**\n * Represents the updating value or function used in `update_value`\n */\nexport type IUpdatePartial<T> = ((value: T) => Partial<T>) | Partial<T>;\n\n/**\n * Represents a entry from an object that was processed via `Object.entries`\n */\nexport type IObjectEntry<T> = [string, T];\n\n/**\n * Represents a sorting comparator for sorting between the keys in a `Object.entries` Array output\n *\n * @internal\n *\n * @param entry_a\n * @param entry_b\n */\nexport function comparator_entries([key_a]: IObjectEntry<any>, [key_b]: IObjectEntry<any>): number {\n    key_a = key_a.toLowerCase();\n    key_b = key_b.toLowerCase();\n\n    if (key_a >= key_b) return 1;\n    else if (key_b >= key_a) return -1;\n\n    return 0;\n}\n\n/**\n * Returns the number of non-identity `!==` hits between the key-values of each object\n *\n * @internal\n *\n * @param object_a\n * @param object_b\n */\nexport function diff_count(object_a: {[key: string]: any}, object_b: {[key: string]: any}): number {\n    let updates = 0;\n    const keys: Set<string> = new Set([...Object.keys(object_a), ...Object.keys(object_b)]);\n\n    for (const key of keys) {\n        if (object_a[key] !== object_b[key]) updates += 1;\n    }\n\n    return updates;\n}\n\n/**\n * Returns the filtered `array` element, that naively matches the `predicate`\n *\n * @internal\n *\n * @param array\n * @param predicate\n */\nexport function filter_collection<T extends object>(\n    array: T[],\n    predicate?: IPredicatePartial<T> | null\n): T[] {\n    if (typeof predicate === \"function\") {\n        return array.filter((item, index) => {\n            return predicate(item, index);\n        });\n    } else if (typeof predicate === \"number\") {\n        return array.filter((item, index) => {\n            return index === predicate;\n        });\n    } else if (predicate !== null && typeof predicate !== \"undefined\") {\n        return array.filter((item, index) => {\n            return match_predicate(item, predicate);\n        });\n    }\n\n    // If the `predicate` did not match any of our accepted\n    // types, just default to noop\n    return array;\n}\n\n/**\n * Returns the first `array` element that, naively matches the `predicate`\n *\n * @internal\n *\n * @param array\n * @param predicate\n */\nexport function find_collection<T extends object>(\n    array: T[],\n    predicate?: IPredicatePartial<T> | null\n): T | undefined {\n    if (typeof predicate === \"function\") {\n        return array.find((item, index) => {\n            return predicate(item, index);\n        });\n    } else if (typeof predicate === \"number\") {\n        return array[predicate];\n    } else if (predicate !== null && typeof predicate !== \"undefined\") {\n        return array.find((item) => match_predicate(item, predicate));\n    }\n\n    return array[0];\n}\n\n/**\n * Returns true if the passed in `value` is `undefined`, `null`, `\"\"`, or `false`\n *\n * @internal\n *\n * @param value\n */\nexport function is_falsy(value: any): boolean {\n    return typeof value === \"undefined\" || value === false || value === null || value === \"\";\n}\n\n/**\n * Returns the a new Array of elements from `array`, with using `mapper` to remap each element\n *\n * @internal\n *\n * @param {*} array\n * @param {*} mapper\n */\nexport function map_collection<T extends object>(array: T[], mapper: IMapperPartial<T>): T[] {\n    if (typeof mapper === \"function\") {\n        return array.map((item, index) => {\n            return mapper(item, index);\n        }) as T[];\n    }\n\n    return array.map((item) => {\n        return {...item, ...mapper};\n    });\n}\n\n/**\n * Returns true if the key-values in `predicate` match that of `item`\n *\n * @internal\n *\n * @param item\n * @param predicate\n */\nexport function match_predicate<T extends object>(item: T, predicate: Partial<T>): boolean {\n    for (const key in predicate) {\n        if (item[key] !== predicate[key]) return false;\n    }\n\n    return true;\n}\n\n/**\n * Returns the filtered `array` element, that naively DOES NOT match the `predicate`\n *\n * @internal\n *\n * @param array\n * @param predicate\n */\nexport function reject_collection<T extends object>(\n    array: T[],\n    predicate?: IPredicatePartial<T> | null\n): T[] {\n    if (typeof predicate === \"function\") {\n        return array.filter((item, index) => {\n            return !predicate(item, index);\n        });\n    } else if (typeof predicate === \"number\") {\n        return array.filter((item, index) => {\n            return index !== predicate;\n        });\n    } else if (predicate !== null && typeof predicate !== \"undefined\") {\n        return array.filter((item, index) => {\n            return !match_predicate(item, predicate);\n        });\n    }\n\n    // If the `predicate` did not match any of our accepted\n    // types, just default to noop\n    return array;\n}\n\n/**\n * Returns the updated `item`, with using `updater` to remap the any values\n *\n * @internal\n *\n * @param {*} item\n * @param {*} updater\n */\nexport function update_object<T extends object>(item: T, updater: IUpdatePartial<T>): [number, T] {\n    let _item: T;\n\n    if (typeof updater === \"object\") {\n        _item = {...item, ...updater};\n    } else {\n        _item = {...item, ...updater(item)};\n    }\n\n    const updates = diff_count(item, _item);\n\n    return [updates, _item];\n}\n","import {is_falsy} from \"../../util/shared/functional\";\n\nimport {IAction} from \"../../util/shared/actions\";\n\n/**\n * Represents the attribute storage object\n */\nexport type IAttributeMap = {[key: string]: any};\n\nlet DEPRECATE_ATTRIBUTES = false;\nlet DEPRECATE_CLASSES = false;\n\n/**\n * Returns an attribute passthrough Svelte Action\n *\n * As a minimal example:\n *\n * ```html\n * <script>\n *  import {attribute_passthrough} from \"svelte-commons/lib/actions\";\n *\n *  const attributes = attribute_passthrough();\n * </script>\n *\n * <!--\n *  By using `attribute_passthrough` as a `use:*` directive, and then supplying\n *  current properties of the Component (`$$props`). The end-developer using\n *  your Component will be able to pass common HTML5 attributes like `.id`\n *\n *  e.g. `<YourComponent id=\"some-id\" />\n *\n *  However, by supplying your own `.style` property like below, it is blacklisted.\n *  Meaning the end-developer cannot override your own `.style` property.\n * -->\n * <div style=\"background-color:blue;\" use:attributes={$$props}>\n *  ...some content...\n * </div>\n * ```\n *\n * However, you can initialize it with a whitelist of accepted-only properties too:\n *\n * ```html\n *  import {attribute_passthrough} from \"svelte-commons/lib/actions\";\n *\n *  // When providing a string array of keys, in this case `[\"style\"]`. The end-developer\n *  // can only passthrough to those specific properties. `html5_passthrough` is initialized\n *  // this way with a long array of common HTML5 attributes\n *  const attributes = attribute_passthrough([\"style\"]);\n * </script>\n *\n * <div use:attributes={$$props}>\n *  ...some content...\n * </div>\n * ```\n *\n * @param whitelist\n */\nexport function attribute_passthrough(whitelist?: string[]): IAction {\n    if (!DEPRECATE_ATTRIBUTES) {\n        console.warn(\n            \"[svelte-commons] DEPRECATE: `attribute_passthrough` is deprecated, use prop spread\"\n        );\n        DEPRECATE_ATTRIBUTES = true;\n    }\n\n    return (element: HTMLElement, properties: IAttributeMap) => {\n        let update: (properties: IAttributeMap) => void;\n        if (whitelist) {\n            // If we have a whitelist, we just need to filter out all the\n            // attributes that already exist before converting into lookup\n            const _whitelist = whitelist.filter((value) => !element.hasAttribute(value));\n            const lookup = new Set(_whitelist);\n\n            update = (properties) => {\n                for (const key in properties) {\n                    if (!lookup.has(key)) continue;\n\n                    // Any \"falsy\" values are treated as removals instead,\n                    // e.g. `undefined`, `null`, `false`\n                    const value = properties[key];\n                    if (is_falsy(value)) element.removeAttribute(key);\n                    else element.setAttribute(key, value);\n                }\n            };\n        } else {\n            // If we don't have a whitlist, we just need to convert the\n            // current attributes into a blacklist lookup\n            const lookup = new Set(element.getAttributeNames());\n\n            update = (properties) => {\n                for (const key in properties) {\n                    if (lookup.has(key)) continue;\n\n                    const value = properties[key];\n                    if (is_falsy(value)) element.removeAttribute(key);\n                    else element.setAttribute(key, value);\n                }\n            };\n        }\n\n        update(properties);\n\n        return {update};\n    };\n}\n\n/**\n * Represents a class name property passthrough Svelte Action\n *\n * As a minimal example:\n *\n * ```html\n * <script>\n *  import {class_passthrough} from \"svelte-commons/lib/actions\";\n *\n *  // Here, we're initializing a passthrough for `pull-right`\n *  // and `margin-right-small` classes as a Svelte Action\n *  const my_classes = class_passthrough([\n *      \"pull-right\",\n *      \"margin-right-small\"\n *  ]);\n * </script>\n *\n * <!--\n *  By using `my_classes` as a `use:*` directive, and then supplying\n *  current properties of the Component (`$$props`). The end-developer using\n *  your Component will be able to pass your class names as properties, like `.pull-right`\n *\n *  e.g. `<YourComponent pull-right />\n *\n *  Which will add the class to the `HTMLElement`. End-developers can also supply truthy\n *  values to dynamically toggle the class\n *\n *  e.g. `<YourComponent pull-right={some_value} />\n * -->\n * <div use:my_classes={$$props}>\n *  ...some content...\n * </div>\n * ```\n *\n * @param class_list\n */\nexport function class_passthrough(class_list: string[]): IAction {\n    if (!DEPRECATE_CLASSES) {\n        console.warn(\n            \"[svelte-commons] DEPRECATE: `class_passthrough` is deprecated, use `map_classes` instead\"\n        );\n        DEPRECATE_CLASSES = true;\n    }\n\n    const lookup = new Set(class_list);\n\n    return (element: HTMLElement, properties: IAttributeMap) => {\n        const update = (properties: IAttributeMap) => {\n            // NOTE: Instead of looping through the provided `class_list`, we need to loop\n            // through the given properties. That way the order of class output is deterministic\n            for (const key in properties) {\n                if (!lookup.has(key)) continue;\n\n                const value = properties[key];\n                element.classList.toggle(key, !is_falsy(value));\n            }\n        };\n\n        update(properties);\n\n        return {update};\n    };\n}\n\n/**\n * Represents a `attribute_passthrough` for common HTML5 attributes\n *\n * As a minimal example:\n *\n * ```html\n * <script>\n *  import {html5_passthrough} from \"svelte-commons/lib/actions\";\n * </script>\n *\n * <!--\n *  By using `html5_passthrough` as a `use:*` directive, and then supplying\n *  current properties of the Component (`$$props`). The end-developer using\n *  your Component will be able to pass common HTML5 attributes like `.id`\n *\n *  e.g. `<YourComponent id=\"some-id\" />\n *\n *  However, by supplying your own `.style` property like below, it is blacklisted.\n *  Meaning the end-developer cannot override your own `.style` property.\n * -->\n * <div style=\"background-color:blue;\" use:html5_passthrough={$$props}>\n *  ...some content...\n * </div>\n * ```\n */\nexport const html5_passthrough = attribute_passthrough([\n    \"alt\",\n    \"class\",\n    \"contenteditable\",\n    \"disabled\",\n    \"hidden\",\n    \"href\",\n    \"id\",\n    \"open\",\n    \"max\",\n    \"maxlength\",\n    \"min\",\n    \"minlength\",\n    \"multiple\",\n    \"readonly\",\n    \"rel\",\n    \"required\",\n    \"size\",\n    \"src\",\n    \"style\",\n    \"title\",\n    \"type\",\n    \"value\"\n]);\n","export * from \"./element\";\n","export * from \"./browser\";\n","function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction validate_store(store, name) {\n    if (!store || typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, callback) {\n    const unsub = store.subscribe(callback);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if (typeof $$scope.dirty === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group) {\n    const value = [];\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.push(group[i].__value);\n    }\n    return value;\n}\nfunction to_number(value) {\n    return value === '' ? undefined : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            for (let j = 0; j < node.attributes.length; j += 1) {\n                const attribute = node.attributes[j];\n                if (!attributes[attribute.name])\n                    node.removeAttribute(attribute.name);\n            }\n            return nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.data !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    if (value != null || input.value) {\n        input.value = value;\n    }\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\nfunction add_resize_listener(element, fn) {\n    if (getComputedStyle(element).position === 'static') {\n        element.style.position = 'relative';\n    }\n    const object = document.createElement('object');\n    object.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\n    object.setAttribute('aria-hidden', 'true');\n    object.type = 'text/html';\n    object.tabIndex = -1;\n    let win;\n    object.onload = () => {\n        win = object.contentDocument.defaultView;\n        win.addEventListener('resize', fn);\n    };\n    if (/Trident/.test(navigator.userAgent)) {\n        element.appendChild(object);\n        object.data = 'about:blank';\n    }\n    else {\n        object.data = 'about:blank';\n        element.appendChild(object);\n    }\n    return {\n        cancel: () => {\n            win && win.removeEventListener && win.removeEventListener('resize', fn);\n            element.removeChild(object);\n        }\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(html, anchor = null) {\n        this.e = element('div');\n        this.a = anchor;\n        this.u(html);\n    }\n    m(target, anchor = null) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(target, this.n[i], anchor);\n        }\n        this.t = target;\n    }\n    u(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    p(html) {\n        this.d();\n        this.u(html);\n        this.m(this.t, this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nlet stylesheet;\nlet active = 0;\nlet current_rules = {};\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    if (!current_rules[name]) {\n        if (!stylesheet) {\n            const style = element('style');\n            document.head.appendChild(style);\n            stylesheet = style.sheet;\n        }\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ``}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    node.style.animation = (node.style.animation || '')\n        .split(', ')\n        .filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    )\n        .join(', ');\n    if (name && !--active)\n        clear_rules();\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        let i = stylesheet.cssRules.length;\n        while (i--)\n            stylesheet.deleteRule(i);\n        current_rules = {};\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error(`Function called outside component initialization`);\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nfunction flush() {\n    const seen_callbacks = new Set();\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        while (dirty_components.length) {\n            const component = dirty_components.shift();\n            set_current_component(component);\n            update(component.$$);\n        }\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                callback();\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro  we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro  needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined' ? window : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction measure(blocks) {\n    const rects = {};\n    let i = blocks.length;\n    while (i--)\n        rects[blocks[i].key] = blocks[i].node.getBoundingClientRect();\n    return rects;\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += \" \" + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += \" \" + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : ``;\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if ($$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(children(options.target));\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set() {\n            // overridden by instance, if it has props\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set() {\n        // overridden by instance, if it has props\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.17.1' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev(\"SvelteDOMRemove\", { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? [\"capture\"] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev(\"SvelteDOMAddEventListener\", { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev(\"SvelteDOMRemoveEventListener\", { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev(\"SvelteDOMRemoveAttribute\", { node, attribute });\n    else\n        dispatch_dev(\"SvelteDOMSetAttribute\", { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev(\"SvelteDOMSetProperty\", { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev(\"SvelteDOMSetDataset\", { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    dispatch_dev(\"SvelteDOMSetData\", { node: text, data });\n    text.data = data;\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(`'target' is a required option`);\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn(`Component was already destroyed`); // eslint-disable-line no-console\n        };\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error(`Infinite loop detected`);\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_function, is_promise, listen, listen_dev, loop, loop_guard, measure, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, validate_component, validate_store, xlink_attr };\n","import { noop, safe_not_equal, run_all, is_function } from '../internal';\nexport { get_store_value as get } from '../internal';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe,\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => store.subscribe((value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","/**\n * Returns the text with delimiters (_, ., [A-Z], spaces) replaced with dashes `-`, also deduplicates consecutive delimiters\n *\n * ```typescript\n * import {format_dash_key} from \"svelte-commons/lib/util/shared\";\n *\n * const text = \"This is a KeyYep\";\n * const key = format_dash_key(text);\n *\n * console.log(key); // logs: `this-is-a-key-yep`\n * ```\n *\n * @param {*} text\n */\nexport function format_dash_key(text: string): string {\n    text = text\n        .replace(/_/g, \"-\")\n        .replace(/\\./g, \"-\")\n        .replace(/\\s/g, \"-\")\n        .replace(/[A-Z]/g, (letter, index) => {\n            if (index > 0) return \"-\" + letter.toLowerCase();\n            return letter.toLowerCase();\n        });\n\n    while (true) {\n        const replaced = text.replace(/\\-\\-/g, \"-\");\n        if (replaced === text) break;\n\n        text = replaced;\n    }\n\n    return text;\n}\n\n/**\n * Returns the pattern with the token delimiter `%s` replaced, with the spread arguments `tokens`\n *\n * ```typescript\n * import {format_tokens} from \"svelte-commons/lib/util/shared\";\n *\n * const pattern = \"My name is %s! How are you, %s?\";\n * const formatted = format_tokens(pattern, \"Jeff\", \"Karen\");\n *\n * console.log(formatted); // logs: `My name is Jeff! How are you, Karen?`\n * ```\n *\n * @param pattern\n * @param tokens\n */\nexport function format_tokens(pattern: string, ...tokens: any[]): string {\n    let index = 0;\n\n    return pattern.replace(/%s/g, () => {\n        let token = tokens[index];\n        token = token.toString();\n\n        index += 1;\n\n        return token;\n    });\n}\n","import {comparator_entries, is_falsy} from \"./functional\";\nimport {format_dash_key, format_tokens} from \"./string\";\n\n/**\n * Represents the type mapping used for the `map_*` functions\n */\nexport type IKeyMap = {[key: string]: any};\n\n/**\n * Represents the object with defaults allowed to be used via `make_memory_storage`\n */\nexport type IStorageDefaults = {[key: string]: string};\n\n/**\n * Returns the `key` and `value` stringified to a CSS Property Declaration, e.g. `color:red`\n *\n * ```typescript\n * import {format_css_declaration} from \"svelte-commons/lib/util/shared\";\n *\n * const key = \"color\";\n * const value = \"red\";\n *\n * const declaration = format_css_declaration(key, value);\n *\n * console.log(declaration); // logs: `color:red`\n * ```\n *\n * @param key\n * @param value\n */\nexport function format_css_declaration(key: string, value: any): string {\n    key = format_dash_key(key);\n    value = value.toString();\n\n    return `${key}:${value}`;\n}\n\n/**\n * Returns the `key` stringified into a CSS Variable reference, e.g. `var(--primary-color)`\n *\n * ```typescript\n * import {format_css_reference} from \"svelte-commons/lib/util/shared\";\n *\n * const key = \"primary-color\";\n * const default_value = \"blue\";\n *\n * const reference = format_css_reference(key, default_value);\n *\n * console.log(reference); // logs: `var(--primary-color, blue)`\n * ```\n *\n * @param key\n * @param default_value\n * @param func\n */\nexport function format_css_reference(\n    key: string,\n    default_value: any = null,\n    func: string = \"var\"\n): string {\n    key = format_dash_key(key);\n\n    if (default_value) {\n        default_value = default_value.toString();\n        return `${func}(--${key}, ${default_value})`;\n    }\n\n    return `${func}(--${key})`;\n}\n\n/**\n * Returns the `key` and `value` stringified into a CSS Variable Declaration, e.g. `--primary-color:red`\n *\n * ```typescript\n * import {format_css_variable} from \"svelte-commons/lib/util/shared\";\n *\n * const key = \"primary-color\";\n * const value = \"red\";\n *\n * const variable = format_css_variable(key, value);\n *\n * console.log(variable); // logs: `--primary-color:red`\n * ```\n *\n * @param key\n * @param value\n */\nexport function format_css_variable(key: string, value: any): string {\n    key = format_dash_key(key);\n    value = value.toString();\n\n    return `--${key}:${value}`;\n}\n\n/**\n * Represents an in-memory reimplementation of a [Web Storage API](https://developer.mozilla.org/en-US/docs/Web/API/Storage)\n *\n * ```javascript\n * import {make_memory_storage} from \"svelte-commons/lib/util/shared\";\n *\n * const storage = make_memory_storage();\n *\n * // Save data to Storage\n * storage.setItem(\"key\", \"value\");\n *\n * // Get saved data from Storage\n * let data = storage.getItem(\"key\");\n *\n * // Remove saved data from Storage\n * storage.removeItem(\"key\");\n *\n * // Remove all saved data from Storage\n * storage.clear();\n * ```\n *\n * @param default_value\n */\nexport function make_memory_storage(default_value: IStorageDefaults): Storage {\n    let storage: Map<string, string>;\n    if (default_value) {\n        const entries = Object.entries(default_value);\n\n        storage = new Map(entries);\n    } else storage = new Map();\n\n    return {\n        length: storage.size,\n\n        clear() {\n            storage.clear();\n        },\n\n        getItem(key): string | null {\n            if (storage.has(key)) return storage.get(key) as string;\n            return null;\n        },\n\n        key(index) {\n            const keys = Array.from(storage.keys());\n\n            return keys[index];\n        },\n\n        removeItem(key) {\n            storage.delete(key);\n\n            // @ts-ignore\n            this.length = storage.size;\n        },\n\n        setItem(key, value) {\n            value = value.toString();\n\n            storage.set(key, value);\n\n            // @ts-ignore\n            this.length = storage.size;\n        }\n    };\n}\n\n/**\n * Returns a key-value mapping of CSS Classes transformed into a single spaced ` ` string, e.g. `btn btn-primary`\n *\n * ```typescript\n * import {map_classes} from \"svelte-commons/lib/util/shared\";\n *\n * const data = {\n *     btn: \"true\",\n *     \"btn-%s\": \"primary\",\n *     btn_outline: false\n * };\n *\n * const classes = map_classes(data);\n *\n * console.log(classes); // logs: `btn btn-primary`\n * ```\n *\n * @param mapping\n * @param delimiter\n */\nexport function map_classes(mapping: IKeyMap, delimiter: string = \" \"): string {\n    let entries = Object.entries(mapping);\n\n    // Classes are NOT sorted, due to CSS specificity. But falsy\n    // values still need to be removed, (excluding stuff like zeroes)\n    entries = entries.filter(([key, value]) => !is_falsy(value));\n\n    const classes = entries.map(([key, value]) => {\n        if (key.includes(\"%s\")) {\n            key = format_tokens(key, value);\n        }\n\n        return key;\n    });\n\n    return classes.join(delimiter);\n}\n\n/**\n * Returns a key-value mapping of CSS Properties transformed into a single semi-colon `;` string, e.g. `background-color:black;color:white;`\n *\n * ```typescript\n * import {map_style} from \"svelte-commons/lib/util/shared\";\n *\n * const data = {\n *     background_color: \"white\",\n *     color: \"black\"\n * };\n *\n * const style = map_style(data);\n *\n * console.log(style); // logs: `background-color:white;color:black;`\n * ```\n *\n * @param mapping\n * @param delimiter\n */\nexport function map_style(mapping: IKeyMap, delimiter: string = \";\"): string {\n    let entries = Object.entries(mapping);\n\n    // Need to sort entries by key for reproducibility, then remove\n    // falsy values, (excluding stuff like zeroes)\n    entries.sort(comparator_entries);\n    entries = entries.filter(([key, value]) => !is_falsy(value));\n\n    const properties = entries.map(([key, value]) => {\n        const declaraton = format_css_declaration(key, value);\n\n        return declaraton + delimiter;\n    });\n\n    return properties.join(\"\");\n}\n\n/**\n * Returns a key-value mapping of CSS Variables transformed into a single semi-colon `;` string, e.g. `--background:black;--foreground:white;`\n *\n * ```typescript\n * import {map_variables} from \"svelte-commons/lib/util/shared\";\n *\n * const data = {\n *     theme_background: \"white\",\n *     theme_foreground: \"black\"\n * };\n *\n * const variables = map_variables(data);\n *\n * console.log(variables); // logs: `--theme-background:white;--theme-foreground:black;`\n * ```\n *\n * @param mapping\n * @param delimiter\n */\nexport function map_variables(mapping: IKeyMap, delimiter: string = \";\"): string {\n    let entries = Object.entries(mapping);\n\n    // Need to sort entries by key for reproducibility, then remove\n    // falsy values, (excluding stuff like zeroes)\n    entries.sort(comparator_entries);\n    entries = entries.filter(([key, value]) => !is_falsy(value));\n\n    const variables = entries.map(([key, value]) => {\n        const variable = format_css_variable(key, value);\n\n        return variable + delimiter;\n    });\n\n    return variables.join(\"\");\n}\n","/**\n * Represents the href of the current context (with no origin), used in various places\n * in `svelte-commons`, such as `util/browser/location` in-lieu of `window.location.href`.\n * IMPLEMENTATION NOTE: Servers! Set it in your middleware / routes to support proper SSR.\n *\n * @internal\n */\nlet CONTEXT_CURRENT_HREF = \"\";\n\n/**\n * Represents the origin of the current context, used in various places in `svelte-commons`,\n * such as `util/browser/location` in-lieu of `window.location`.\n * IMPLEMENTATION NOTE: This value is currently only used so `URL` will construct with `URL.hash`\n * values. So you normally shouldn't have to update this!\n *\n * @internal\n */\n\nlet CONTEXT_CURRENT_ORIGIN = \"http://localhost/\";\n\n/**\n * Represents if the current context of the code is running in Browser\n */\nexport const CONTEXT_IS_BROWSER = typeof window !== \"undefined\";\n\n/**\n * Returns the current **COMPLETE** (e.g. incl. query params / hash) href of the context, `location.href` (Browser) / `CONTEXT_CURRENT_HREF` (Server)\n */\nexport function get_current_href(): string {\n    if (CONTEXT_IS_BROWSER) return `${location.href}${location.search}${location.hash}`;\n    return CONTEXT_CURRENT_HREF;\n}\n\n/**\n * Returns the `URL` instance of the current context, based on `location` (Browser) / `CONTEXT_CURRENT_HREF` and `CONTEXT_CURRENT_ORIGIN` (Server)\n */\nexport function get_current_url(): URL {\n    if (CONTEXT_IS_BROWSER) return new URL(location as any);\n    return new URL(get_current_href(), get_current_href());\n}\n\n/**\n * Returns the URL origin of the context, `location.origin` (Browser) / `CONTEXT_CURRENT_ORIGIN` (Server)\n */\nexport function get_current_origin(): string {\n    if (CONTEXT_IS_BROWSER) return location.origin;\n    return CONTEXT_CURRENT_ORIGIN;\n}\n\n/**\n * Sets the current **COMPLETE** (e.g. incl. query params / hash) href of the context, `location.href` (Browser) / `CONTEXT_CURRENT_HREF` (Server)\n * @param href\n */\nexport function set_current_href(href: string): void {\n    if (CONTEXT_IS_BROWSER) location.href = href;\n    else CONTEXT_CURRENT_HREF = href;\n}\n\n/**\n * Sets the current URL origin of the context, `CONTEXT_CURRENT_ORIGIN` (Server)\n *\n * NOTE: Will throw an exception when ran on Browser\n *\n * @param origin\n */\nexport function set_current_origin(origin: string): void {\n    if (CONTEXT_IS_BROWSER) {\n        throw ReferenceError(\"bad dispatch to 'set_current_origin' (readonly in Browser)\");\n    } else CONTEXT_CURRENT_ORIGIN = origin;\n}\n","import {Readable, Writable} from \"svelte/store\";\n\n/**\n * NOTE:\n *  Since Svelte doesn't export the direct input / output type\n *  aliases, we need to redefine them below\n */\n\n/**\n *\n */\nexport type IStoreInvalidator<T> = (value?: T) => void;\n\n/**\n *\n */\nexport type IStoreStartStopNotifier<T> = (set: IStoreSubscriber<T>) => IStoreUnsubscriber;\n\n/**\n *\n */\nexport type IStoreSubscriber<T> = (value: T) => void;\n\n/**\n *\n */\nexport type IStoreUnsubscriber = () => void;\n\n/**\n *\n */\nexport type IStoreUpdater<T> = (value: T) => T;\n\n/**\n * Returns if the `value` matches a `Readable` Svelte Store implementation\n *\n * As a minimal example:\n *\n * ```javascript\n * import {readable, writable} from \"svelte/store\";\n *\n * import {is_readable} from \"svelte-commons/lib/util/shared\";\n *\n * const readable_store = readable(\"some value\");\n * const writable_store = writable(\"some value\");\n *\n * console.log(\n *     is_readable(readable_store),\n *     is_readable(writable_store)\n * ); // logs: `true`, `true`\n * ```\n */\nexport function is_readable<T>(value: unknown): value is Readable<T> {\n    // @ts-ignore\n    return typeof value === \"object\" && typeof value.subscribe === \"function\";\n}\n\n/**\n * Returns if the `value` matches a `Writable` Svelte Store implementation\n *\n * As a minimal example:\n *\n * ```javascript\n * import {readable, writable} from \"svelte/store\";\n *\n * import {is_writable} from \"svelte-commons/lib/util/shared\";\n *\n * const readable_store = readable(\"some value\");\n * const writable_store = writable(\"some value\");\n *\n * console.log(\n *     is_writable(readable_store),\n *     is_writable(writable_store)\n * ); // logs: `false`, `true`\n * ```\n *\n * @param value\n */\nexport function is_writable<T>(value: unknown): value is Writable<T> {\n    return (\n        // @ts-ignore\n        typeof value === \"object\" &&\n        // @ts-ignore\n        typeof value.set === \"function\" &&\n        // @ts-ignore\n        typeof value.subscribe === \"function\" &&\n        // @ts-ignore\n        typeof value.update === \"function\"\n    );\n}\n","import {SvelteComponent} from \"svelte/internal\";\n\n/**\n * Represents the Regular Expression to match patterns in route patterns, e.g. `/my/route/:parameter/:names`\n *\n * @internal\n */\nconst ROUTE_PARAMETER_EXPRESSION = /:[^\\s/]+/g;\n\n/**\n * Represents the matching function returned by `make_router`\n */\nexport type IRouter = (pathname: string) => [IRouterParameters, SvelteComponent] | null;\n\n/**\n * Represents a set of parsed route pattern parameters\n */\nexport type IRouterParameters = {[key: string]: string | undefined};\n\n/**\n * Represents the matching function returned by `compile_route`\n */\nexport type IRouterMatcher = (pathname: string) => IRouterParameters | null;\n\n/**\n * Represents a route pattern -> Svelte Component mapping\n */\nexport interface IRouterMap {\n    [key: string]: SvelteComponent;\n}\n\n/**\n * Returns the normalized version of the `pathname` string (via `URL`)\n *\n * @internal\n *\n * @param pathname\n */\nfunction normalize_pathname(pathname: string): string {\n    return new URL(pathname, \"http://localhost\").pathname;\n}\n\n/**\n * Returns the sorting for route patterns, sorting longer (more specific) patterns\n * higher than shorter (less specific) patterns\n *\n * @internal\n *\n * @param a\n * @param b\n */\nfunction sort_routes(a: [string, SvelteComponent], b: [string, SvelteComponent]) {\n    return b[0].length - a[0].length;\n}\n\n/**\n * Returns a pathname matching function, that returns the named parameters in\n * the given pathname if the route matched\n *\n * @internal\n *\n * @param route\n */\nexport function compile_route(route: string): IRouterMatcher {\n    // source: https://stackoverflow.com/a/40739605\n    route = normalize_pathname(route);\n\n    const parameters: string[] = [];\n    const expression = new RegExp(\n        \"^\" + route.replace(ROUTE_PARAMETER_EXPRESSION, \"([\\\\w-]+)\") + \"$\"\n    );\n\n    // We need to collect the parameters name from the route pattern in order,\n    // so the matching function return the parsed pathnames as named keys\n    let match;\n    while ((match = ROUTE_PARAMETER_EXPRESSION.exec(route))) {\n        parameters.push(match[0].slice(1));\n    }\n\n    return (pathname) => {\n        pathname = normalize_pathname(pathname);\n\n        const match = expression.exec(pathname);\n        if (match) {\n            const _parameters: IRouterParameters = {};\n            for (const index in parameters) {\n                // `RegExp.exec` returns the matched value as index `0`,\n                // so we need to increment by `1`\n                _parameters[parameters[index]] = match[parseInt(index) + 1];\n            }\n\n            return _parameters;\n        }\n\n        return null;\n    };\n}\n\n/**\n * Returns a pathname matching function\n * @param routes\n */\nexport function make_router(routes: IRouterMap): IRouter {\n    // source: https://stackoverflow.com/a/40739605\n    let route_entries = Object.entries(routes);\n    route_entries = route_entries.sort(sort_routes);\n\n    const compiled_routes: [string, IRouterMatcher, SvelteComponent][] = route_entries.map(\n        ([route, Component]) => {\n            const match = compile_route(route);\n\n            return [route, match, Component];\n        }\n    );\n\n    return (pathname: string) => {\n        for (const [route, match, Component] of compiled_routes) {\n            const parameters = match(pathname);\n            if (parameters) return [parameters, Component];\n        }\n\n        return null;\n    };\n}\n","export * from \"./actions\";\nexport * from \"./builtin\";\nexport * from \"./browser\";\nexport * from \"./context\";\nexport * from \"./functional\";\nexport * from \"./string\";\nexport * from \"./stores\";\nexport * from \"./url\";\n","/**\n * @packageDocumentation\n * @hidden\n */\n\nimport {get_current_origin, get_current_url} from \"../shared\";\n\n/**\n * Updates the current search string\n * NOTE: Set `hash` to `true`, to update `location.hash` as a proper URL\n *\n * @internal\n *\n * @param search\n * @param hash\n * @param push_state\n * @param state\n */\nfunction update_search(\n    search: URLSearchParams,\n    hash: boolean = false,\n    push_state: boolean = false,\n    state: any = history.state\n): void {\n    const url = get_url(hash);\n    url.search = search.toString();\n\n    update_url(url, hash, push_state, state);\n}\n\n/**\n * Returns an object mapping of the current `location.search` value\n * NOTE: Set `hash` to `true` for hash-based routing systems\n *\n * @internal\n *\n * @param hash\n */\nexport function get_query_params(hash: boolean = false): {[key: string]: boolean | string} {\n    const search = get_url(hash).searchParams;\n    const params: {[key: string]: boolean | string} = {};\n\n    for (const [key, value] of search.entries()) {\n        params[key] = value ? value : true;\n    }\n\n    return params;\n}\n\n/**\n * Returns the current URL based on `Location`\n * NOTE: Set `hash` to `true`, to use `location.hash` as the source instead\n *\n * @internal\n *\n * @param hash\n */\nexport function get_url(hash: boolean = false): URL {\n    // NOTE: We need to be able to support the current context's\n    // set URL. That way we can run properly in SSR mode\n    const url = get_current_url();\n\n    if (hash) return new URL(url.hash.slice(1), get_current_origin());\n    return url;\n}\n\n/**\n * Sets the current url\n * NOTE: Set `hash` to `true`, to update `location.hash` as a proper URL\n *\n * @internal\n *\n * @param url\n * @param hash\n * @param push_state\n * @param state\n */\nexport function update_url(\n    url: URL,\n    hash: boolean = false,\n    push_state: boolean = false,\n    state: any = history.state\n): void {\n    const updater = push_state ? \"pushState\" : \"replaceState\";\n\n    // Want to make sure empty pathnames are just removed from the\n    // hash string entirely\n    let {pathname} = url;\n    if (pathname === \"/\") pathname = \"\";\n\n    let href = `${pathname}${url.search}${url.hash}`;\n    if (hash) href = `${location.pathname}${location.search}` + (href ? \"#\" + href : \"\");\n\n    history[updater](state, \"\", href);\n}\n\n/**\n * Updates the current `location.search` with the `*.toString()` values from a `params` mapping\n * NOTE: Set `hash` to `true` for hash-based routing systems\n * NOTE: Mapped values set to `undefined` / `\"\"` / `false`, they will be deleted from the query string instead\n *\n * @internal\n *\n * @param params\n * @param hash_mode\n */\nexport function update_query_params(\n    params: {[key: string]: boolean | string | undefined},\n    hash: boolean = false\n): void {\n    const search = get_url(hash).searchParams;\n\n    for (const key in params) {\n        const value = params[key];\n\n        if (typeof value === \"undefined\" || value === \"\" || value === false) search.delete(key);\n        else search.set(key, value.toString());\n    }\n\n    update_search(search, hash);\n}\n","export * from \"./location\";\n","export * from \"./browser\";\nexport * from \"./shared\";\n","import {SvelteComponent} from \"svelte/internal\";\nimport {Readable, Writable, readable, writable} from \"svelte/store\";\n\nimport {\n    get_query_params,\n    update_query_params,\n    get_url,\n    update_url\n} from \"../../util/browser/location\";\n\nimport {CONTEXT_IS_BROWSER} from \"../../util/shared/context\";\n\nimport {IRouterMap, IRouterParameters, make_router} from \"../../util\";\n\n/**\n * Represents the options passable into [[pathname]] Svelte Store\n */\nexport interface IPathnameOptions {\n    /**\n     * Represents if the [[pathname]] Store should operate in hash mode,\n     * e.g. bind to the pathname after the URL hashtag `https://my.domain/#path/to/route`\n     */\n    hash?: boolean;\n\n    /**\n     * Represents if updates to [[pathname]] Store push a new History state, rather than replace\n     */\n    push_state?: boolean;\n}\n\n/**\n * Represents value provided to subscriptions of the [[router]] Svelte Store\n */\nexport interface IRouterValue {\n    /**\n     * Represents the Svelte Component assigned to the current route\n     */\n    Component: SvelteComponent;\n\n    /**\n     * Represents the parsed parameters of the current route\n     */\n    parameters: IRouterParameters;\n}\n\n/**\n * Represents the options passable into [[query_param]] Svelte Store\n */\nexport interface IQueryParamOptions {\n    /**\n     * Represents if [[query_param]] should operate in hash mode,\n     * e.g. bind to query variables after the URL hashtag `https://my.domain/#path/to/route?my_var=XXXX`\n     */\n    hash?: boolean;\n}\n\n/**\n * Returns the standardized defaults for options passed into `pathname` Store\n *\n * @internal\n *\n * @param options\n */\nfunction PathnameOptions(options: IPathnameOptions = {}): IPathnameOptions {\n    return {\n        hash: false,\n        push_state: true,\n        ...options\n    };\n}\n\n/**\n * Returns the standardized defaults for options passed into `query_param` Store\n *\n * @internal\n *\n * @param options\n */\nfunction QueryParamOptions(options: IQueryParamOptions = {}): IQueryParamOptions {\n    return {\n        hash: false,\n        ...options\n    };\n}\n\n/**\n * Returns a `Readable` (Server) / `Writable` (Browser) Svelte Store for listening / modifying `location.hash`\n *\n * NOTE: For convenience, values read / written already have their prefixing \"#\" removed / added respectively\n *\n * As a minimal example:\n *\n * ```html\n * <script>\n *     import {hash} from \"svelte-commons/lib/stores/browser\";\n *\n *     // Here, we're binding to `location.hash`. The Store's\n *     // value will default to the initial value of `location.hash`\n *     const store = hash();\n * </script>\n *\n * // Below will show different messages depending on the current `location.hash`\n * {#if $store === \"I-am-a-hash-string\"}\n *     Hi :)\n * {:else}\n *     Click <a href=\"#I-am-a-hash-string\">here</a> to see a secret!\n * {/if}\n * ```\n */\n\nexport function hash(): Readable<string> | Writable<string> {\n    const url = get_url();\n\n    if (!CONTEXT_IS_BROWSER) return readable(url.hash, () => {});\n\n    const store = writable(url.hash, (set) => {\n        function on_hash_change() {\n            set(location.hash ? location.hash.slice(1) : \"\");\n        }\n\n        set(location.hash ? location.hash.slice(1) : \"\");\n        window.addEventListener(\"hashchange\", on_hash_change);\n\n        return () => {\n            window.removeEventListener(\"hashchange\", on_hash_change);\n        };\n    });\n\n    store.subscribe((value) => {\n        location.hash = \"#\" + value;\n    });\n\n    return store;\n}\n\n/**\n * Returns a `Readable` (Server) / `Writable` (Browser) Svelte Store with a reactive binding to current pathname\n *\n * As a minimal example:\n *\n * ```html\n * <script>\n *     import {pathname} from \"svelte-commons/lib/stores/browser\";\n *\n *     const store = pathname();\n * </script>\n *\n * <!--\n *     The below `<h1>` element, will reactively display our current `location.pathname`, in the\n *     case of `http://example.domain/some/path`, it will display `The current pathname is: /some/path`\n * -->\n * <h1>The current pathname is: {$store}</h1>\n * ```\n *\n * And then, you can also bind hash-based pathnames:\n *\n * ```html\n * <script>\n *     import {pathname} from \"svelte-commons/lib/stores/browser\";\n *\n *     // By passing `.hash = true`, we're binding hash-based URLs like `http://example.domain/#some/path`. Instead\n *     // of server-based pathnames like `http://example.domain/some/path`\n *     const store = pathname({hash: true});\n * </script>\n *\n * <!--\n *     Below will show different message depending on the hash-based pathname\n * -->\n * {#if $store === \"/happy-message\"}\n *     Hi :)\n * {:else}\n *     404: Click <a href=\"#/happy-message\">here</a> to see a secret!\n * {/if}\n * ```\n *\n * @param options\n */\nexport function pathname(options: IPathnameOptions = {}): Readable<string> | Writable<string> {\n    const {hash, push_state} = PathnameOptions(options);\n    let _pathname = get_url(hash).pathname;\n\n    if (!CONTEXT_IS_BROWSER) return readable(_pathname, () => {});\n\n    const event_name = hash ? \"hashchange\" : \"popstate\";\n\n    const store = writable(_pathname, (set) => {\n        function on_url_change() {\n            const {pathname} = get_url(hash);\n\n            _pathname = pathname;\n            set(pathname);\n        }\n\n        // Need to make sure we're always fresh, whenever we initialize again\n        on_url_change();\n\n        window.addEventListener(event_name, on_url_change);\n        return () => {\n            window.removeEventListener(event_name, on_url_change);\n        };\n    });\n\n    store.subscribe((value) => {\n        const url = new URL(value, location.origin);\n\n        // We want to make sure that we don't update the Browser history\n        // on our initial value or window events\n        if (_pathname !== url.pathname) update_url(url, hash, push_state);\n    });\n\n    return store;\n}\n\n/**\n * Returns a `Readable` Svelte Store, which returns the assigned Svelte Component and\n * parameters to the current pathname.\n *\n * For this Store example, we have a two view Components:\n *\n * **views/SampleView.svelte**\n *\n * ```html\n * <script type=\"module\">\n *     let view_count = 0;\n * </script>\n *\n * <script>\n *     // Below, we're incrementing our view count per visit to this route view\n *     view_count += 1;\n * </script>\n *\n * // Next, we're passing the current amount of views into the echo route\n * Seems like you just hit the homepage, try visting <a href=\"#/echo/{view_count}\">here</a>!\n * ```\n *\n * **views/ParameterView.svelte**\n *\n * ```html\n * <script>\n *     // This is the property that will be used by the router as a URL parameter\n *     export let view_count = 0;\n * </script>\n *\n * Wow, it seems like you visited the homepage, <b>{view_count}</b> times!\n * ```\n *\n * Finally we will have our main application Component that will handle matching them:\n *\n * **Application.svelte**\n *\n * ```html\n * <script>\n *     import {router} from \"svelte-commons/lib/stores/browser\";\n *\n *     import ParameterView from \"./views/ParameterView.svelte\";\n *     import SampleView from \"./views/SampleView.svelte\";\n *\n *     // Below, we're creating a new router Store that has two\n *     // of our views bound to two specific hash URLs\n *     const store = router({\n *         \"\":                  SampleView,\n *         \"echo/:view_count\":  ParameterView\n *     }, {hash: true});\n *\n *     // Here, we're just reactively listening to our router Store. It will\n *     // return, if any matches found, the target view Component and the URL parameters\n *     let Component, parameters;\n *     $: {\n *         const results = $store;\n *\n *         if (results) ({Component, parameters} = results);\n *         else {\n *             Component = null;\n *             parameters = null;\n *         }\n *     }\n * </script>\n *\n * {#if Component}\n *     <!--\n *         If our router Store returned a match, we render the view Component and\n *         pass in the route parameters\n *     -->\n *\n *     <svelte:component this={Component} {...parameters} />\n * {:else}\n *     <!--\n *         Since no match was returned, we simply display a \"404\" message\n *     -->\n *\n *     <h1>404 - Unknown route <code>{location.hash.slice(1)}</code></h1>\n * {/if}\n * ```\n *\n * @param routes\n * @param options\n */\nexport function router(\n    routes: IRouterMap,\n    options: IPathnameOptions = {}\n): Readable<IRouterValue | null> {\n    const router = make_router(routes);\n    const store = pathname(options);\n\n    return readable<IRouterValue | null>(null, (set) => {\n        function on_pathname(pathname: string) {\n            const results = router(pathname);\n\n            if (results) set({Component: results[1], parameters: results[0]});\n            else set(null);\n        }\n\n        const unsubscribe = store.subscribe(on_pathname);\n        return () => {\n            unsubscribe();\n        };\n    });\n}\n\n/**\n * Returns a `Readable` (Server) / `Writable` (Browser) Svelte Store with a reactive binding to the given Query Parameter\n *\n * NOTE: When setting value to `undefined` / `\"\"` / `false` or the `default_value`, it will be deleted from the query string instead\n *\n * As a minimal example:\n *\n * ```html\n * <script>\n *     import {query_param} from \"svelte-commons/lib/stores/browser\";\n *\n *     // Here, we're binding the `?my_string_key=XXXX` query parameter. And if the value\n *     // is equal to our default of `Joseph Joestar`, it wont appear in the URL\n *     const store = query_param(\"my_string_key\", \"Joseph Joestar\");\n * </script>\n *\n * <!--\n *     Below will bind the `<h1>` and `<input />` elements to reactively display our\n *     parameter. And also will allow the end-user to change the parameter as-well\n * -->\n * <h1>Hello, {$store}!</h1>\n * <input type=\"text\" bind:value={$store} />\n * ```\n *\n * You can also bind boolean parameters:\n *\n * ```html\n * <script>\n *     import {query_param} from \"svelte-commons/lib/stores/browser\";\n *\n *     // Here, we're binding the `?my_boolean_key` query parameter. And we're\n *     // defaulting to `false`.\n *     const store = query_param(\"my_boolean_key\", false);\n *\n *     function on_click(event) {\n *         // This will just simply toggle the parameter in the URL\n *         $store = !$store;\n *     }\n * </script>\n *\n * <!--\n *     Below will display different messages, depending on if the `?my_boolean_key` parameter is\n *     in the URL. And also allow the end-user toggle the parameter in the URL by clicking the button\n * -->\n * {#if $store}\n *     <h1>my_boolean_key is currently set to true!</h1>\n * {:else}\n *     <h1>my_boolean_key is currently set to false...</h1>\n * {/if}\n *\n * <button on:click={on_click}>Toggle Message</button>\n * ```\n *\n * Finally, you can also bind hash-based parameters:\n *\n * ```html\n * <script>\n *     import {query_param} from \"svelte-commons/lib/stores/browser\";\n *\n *     // This is exactly the same as the first example. Expect instead of reactively\n *     // binding to `http://example.domain/some/path?my_string_key=XXX`, we're binding to hash-based\n *     // URLs. e.g. `http://example.domain/#some/path?my_string_key=XXX`.\n *     const store = query_param(\"my_string_key\", \"Joseph Joestar\", {hash: true});\n * </script>\n *\n * <h1>Hello, {$store}!</h1>\n * <input type=\"text\" bind:value={$store} />\n * ```\n * @param key\n * @param default_value\n * @param options\n */\nexport function query_param<T = boolean | string>(\n    key: string,\n    default_value: boolean | string = \"\",\n    options: IQueryParamOptions = {}\n): Readable<T> | Writable<T> {\n    const {hash} = QueryParamOptions(options);\n\n    const params = get_query_params(hash);\n    const stored_value = typeof params[key] !== \"undefined\" ? params[key] : default_value;\n\n    if (!CONTEXT_IS_BROWSER) return readable<T>(stored_value as any, () => {});\n\n    const store = writable<T>(stored_value as any);\n\n    store.subscribe((value: any) => {\n        if (value === default_value) update_query_params({[key]: undefined}, hash);\n        else update_query_params({[key]: value}, hash);\n    });\n\n    return store;\n}\n","import {Readable, Writable, readable, writable} from \"svelte/store\";\n\nimport {IJSONType} from \"../../util/shared/builtin\";\nimport {CONTEXT_IS_BROWSER} from \"../../util/shared/context\";\n\n/**\n * Represents the Svelte Store factory returned by `storage`\n */\nexport type IStorageStore<T> = (key: string, default_value: T) => Readable<T> | Writable<T>;\n\n/**\n * Represents all the options passable into `storage`\n */\nexport interface IStorageOptions {\n    /**\n     * Represents the event to listen to for changes\n     */\n    event?: string;\n\n    /**\n     * Represents the source of the event to listen to\n     */\n    event_source?: EventTarget;\n\n    /**\n     * Represents the prefix to prepend to all bound keys\n     */\n    prefix?: string;\n}\n\n/**\n * Returns the standardized defaults for options passed into `storage` Store\n *\n * @internal\n *\n * @param options\n */\nfunction StorageOptions(options: IStorageOptions = {}): IStorageOptions {\n    return {\n        event: undefined,\n        event_source: undefined,\n        prefix: \"svelte-commons.\",\n        ...options\n    };\n}\n\n/**\n * Returns a `Readable` (Server) / `Writable` (Browser) Svelte Store with a reactive binding to a given `Storage` adapter\n *\n * NOTE: Only **JSON-compatible** values are supported\n *\n * As a semi-complete example:\n *\n * ```javascript\n * import {get} from \"svelte/store\";\n *\n * import {storage} from \"svelte-commons/lib/stores/browser\";\n *\n * // Below, creating a factory function wrapper around the `localStorage` Web Storage API\n * const local_storage = storage(window.localStorage, {\n *     // Both `event` and `event_source` tells the Store what event string to\n *     // listen to and what `EventTarget` to listen from for tab-sync\n *     event: \"storage\",\n *     event_source: window,\n *\n *     // `.prefix` tells the Store to prefix all storage keys with a specific string (defaults to `svelte-commons.`)\n *     prefix: \"my_key_prefix.\"\n * });\n *\n * // Now we can use our new `local_storage` factory to make a reactive Store binding\n * // to a specific `localStorage` key.\n * const store = local_storage(\"my_string_key\", \"I am default\");\n *\n * // Using `get`, we can see the Store is already at its default\n * console.log(get(store)); // logs: `I am default`\n *\n * // Since there is nothing set yet, the actual localStorage key is empty\n * console.log(window.localStorage.getItem(\"my_key_prefix.my_string_key\")) // logs: `null`\n *\n * // After setting a value, both the Store and `localStorage` have the same value\n * store.set(\"But, this is not default\");\n * console.log(\n *     get(store),\n *     window.localStorage.getItem(\"my_key_prefix.my_string_key\")\n * ); // logs: `But, this is not default`, `\"But, this is not default\"`\n *\n * // By setting the Store to the default value OR `undefined`, the\n * // `localStorage` item is removed\n * store.set(\"I am default\");\n *\n * console.log(\n *     get(store),\n *     window.localStorage.getItem(\"my_key_prefix.my_string_key\")\n * ); // logs: `I am default`, `null`\n * ```\n *\n * @param adapter\n * @param options\n */\nexport function storage<T extends IJSONType>(\n    adapter: Storage,\n    options: IStorageOptions = {}\n): IStorageStore<T> {\n    const {event, event_source, prefix} = StorageOptions(options);\n\n    return (key, default_value) => {\n        if (!CONTEXT_IS_BROWSER) return readable<T>(default_value, () => {});\n\n        if (prefix) key = prefix + key;\n\n        const stored_value = adapter.getItem(key);\n        const parsed_value = stored_value ? JSON.parse(stored_value) : default_value;\n\n        const {set, subscribe, update} = writable<T>(parsed_value, (set) => {\n            function on_change(event: any) {\n                event: StorageEvent = event.detail ? event.detail : event;\n\n                if (event.storageArea !== adapter || event.key !== key) return;\n\n                if (event.newValue) set(JSON.parse(event.newValue));\n                else set(default_value);\n            }\n\n            if (event) {\n                event_source?.addEventListener(event, on_change as any);\n                return () => event_source?.removeEventListener(event, on_change as any);\n            }\n        });\n\n        return {\n            subscribe,\n\n            set(value) {\n                if (typeof value === \"undefined\") value = default_value;\n\n                if (value === default_value) adapter.removeItem(key);\n                else adapter.setItem(key, JSON.stringify(value));\n\n                set(value);\n            },\n\n            update(updater) {\n                update((value) => {\n                    value = updater(value);\n\n                    if (typeof value === \"undefined\") value = default_value;\n\n                    if (value === default_value) adapter.removeItem(key);\n                    else adapter.setItem(key, JSON.stringify(value));\n\n                    return value;\n                });\n            }\n        };\n    };\n}\n\n/**\n * Returns a `storage` Svelte Store with a reactive binding to `window.localStorage`\n *\n * NOTE: Only **JSON-compatible** values are supported\n *\n * As a minimal example:\n *\n * ```javascript\n * import {local_storage} from \"svelte-commons/lib/stores/browser\";\n *\n * const store = local_storage(\"my_string_key\", \"some default string\");\n *\n * store.subscribe((value) => {\n *     console.log(value);\n * }); // Will log any changes to the Store\n *\n * store.set(\"a non-default string\"); // logs: `a non-default string`\n *\n * console.log(\n *     window.localStorage.getItem(\"svelte-commons.my_string_key\")\n * ); // logs: `\"a non-default string\"`\n * ```\n */\nexport const local_storage = storage(localStorage, {\n    event: \"storage\",\n    event_source: window\n});\n\n/**\n * Returns a `storage` Svelte Store with a reactive binding to `window.sessionStorage`\n *\n * NOTE: Only **JSON-compatible** values are supported\n *\n * As a minimal example:\n *\n * ```javascript\n * import {session_storage} from \"svelte-commons/lib/stores/browser\";\n *\n * const store = session_storage(\"my_string_key\", \"some default string\");\n *\n * store.subscribe((value) => {\n *     console.log(value);\n * }); // Will log any changes to the Store\n *\n * store.set(\"a non-default string\"); // logs: `a non-default string`\n *\n * console.log(\n *     window.sessionStorage.getItem(\"svelte-commons.my_string_key\")\n * ); // logs: `\"a non-default string\"`\n * ```\n */\nexport const session_storage = storage(sessionStorage, {\n    event: \"storage\",\n    event_source: window\n});\n","export * from \"./location\";\nexport * from \"./storage\";\n","import {Writable, get, writable} from \"svelte/store\";\n\nimport {\n    IMapperPartial,\n    IPredicatePartial,\n    IUpdatePartial,\n    filter_collection,\n    find_collection,\n    map_collection,\n    reject_collection,\n    update_object\n} from \"../../util/shared/functional\";\n\nimport {IStoreStartStopNotifier} from \"../../util/shared/stores\";\n\n/**\n * Represents a `Writable` Svelte Store for interacting with an `Array` of `Object`s\n *\n * NOTE: All operation methods use `get` from `svelte/store`, which may incur\n * performance penalty in hot codepaths\n *\n * As a minimal example:\n *\n * ```javascript\n * import {collection} from \"svelte-commons/lib/stores/shared\";\n *\n * // We can pass nothing, which will just initialize an internal empty `Array`\n * const store = collection();\n *\n * // Or, we can also pass in our own `Array` value\n * const store = collection([\n *     {\n *         name: \"John Smith\",\n *         positions: [\"President\", \"Ex-CIA Agent\"]\n *     },\n *\n *     {\n *         name: \"James Bond\",\n *         positions: [\"MI6 Agent\", \"Rival of John Smith\"]\n *     }\n * ]);\n * ```\n *\n * Alternatively, you can wrap any Store that implements `.subscribe`, and optionally `.set` for mutations\n *\n * ```javascript\n * import {local_storage} from \"svelte-commons/lib/stores/browser\";\n * import {collection} from \"svelte-commons/lib/stores/shared\";\n *\n * // We're binding `localStore.getItem/setItem(\"my_array_key\", ...)` into a Svelte Store\n * const storage = local_storage(\"my_array_key\", []);\n *\n * // And then wrapping it into the `collection` Store to treat it a reactive\n * // source of an `Array` of `Object`s\n * const store = collection(store);\n * ```\n */\nexport interface ICollectionStore<T> extends Writable<T[]> {\n    /**\n     * Returns a filtered copy current collection, with every item that matches the `predicate`\n     *\n     * As a minimal example:\n     *\n     * ```javascript\n     * import {collection} from \"svelte-commons/lib/stores/shared\";\n     *\n     * // Define our initial collection payload\n     * const initial_data = [\n     *     {\n     *         name: \"John Smith\",\n     *         positions: [\"President\", \"Ex-CIA Agent\"]\n     *     },\n     *\n     *     {\n     *         name: \"James Bond\",\n     *         positions: [\"MI6 Agent\", \"Rival of John Smith\"]\n     *     }\n     * ];\n     *\n     * const store = collection(initial_data);\n     *\n     * // We filter for objects that only have `John Smith` as the `.name` key\n     * const results = store.filter({name: \"John Smith\"});\n     *\n     * console.log({results}); // logs: `[{name: \"John Smith\", positions: [\"President\", \"Ex-CIA Agent\"]}]`\n     *\n     * // Then we put our results back into the Store\n     * store.set(results);\n     *\n     * // Alternatively, we can also pass in the index of what we want:\n     * // const results = store.filter(0);\n     *\n     * // Or, a function that filters the items manually:\n     * // const results = store.filter((value, index) => value.name === \"John Smith\");\n     * ```\n     *\n     * For simplicity, you can also have [[ICollectionStore.filter]] set the Store value for you:\n     *\n     * ```javascript\n     * import {collection} from \"svelte-commons/lib/stores/shared\";\n     *\n     * const store = collection(...);\n     *\n     * // When passing `true`, `store.set` is called for us. And the\n     * // results is still returned\n     * const results = store.filter({name: \"John Smith\"}, true);\n     * ```\n     */\n    filter(predicate?: IPredicatePartial<T> | null, mutate?: boolean): T[];\n\n    /**\n     * Returns the first collection item that matches the `predicate`\n     *\n     * As a minimal example:\n     *\n     * ```javascript\n     * import {collection} from \"svelte-commons/lib/stores/shared\";\n     *\n     * // Define our initial collection payload\n     * const initial_data = [\n     *     {\n     *         name: \"John Smith\",\n     *         positions: [\"President\", \"Ex-CIA Agent\"]\n     *     },\n     *\n     *     {\n     *         name: \"James Bond\",\n     *         positions: [\"MI6 Agent\", \"Rival of John Smith\"]\n     *     }\n     * ];\n     *\n     * const store = collection(initial_data);\n     *\n     * // Find only the first object that has `John Smith` as the `.name` key\n     * const results = store.find({name: \"John Smith\"});\n     *\n     * console.log({results}); // logs: `{name: \"John Smith\", positions: [\"President\", \"Ex-CIA Agent\"]}`\n     *\n     * // Alternatively, we can also pass in the index of what we want:\n     * // const results = store.find(0);\n     *\n     * // Or, a function that filters the items manually:\n     * // const results = store.find((value, index) => value.name === \"John Smith\");\n     * ```\n     */\n    find(predicate?: IPredicatePartial<T> | null): T | undefined;\n\n    /**\n     * Returns the current collection of items from the internal Store\n     *\n     * NOTE: This is just a wrapper around `get` from `svelte/store`\n     *\n     * As a minimal example:\n     *\n     * ```javascript\n     * import {collection} from \"svelte-commons/lib/stores/shared\";\n     *\n     * const store = collection(...);\n     * const array = store.get();\n     *\n     * console.log(array);\n     * ```\n     */\n    get(): T[];\n\n    /**\n     * Returns the current collection of items, with each item remapped with new values\n     *\n     * As a minimal example:\n     *\n     * ```javascript\n     * import {collection} from \"svelte-commons/lib/stores/shared\";\n     *\n     * // Define our initial collection payload\n     * const initial_data = [\n     *     {\n     *         name: \"James Bond\",\n     *         positions: [\"MI6 Agent\"]\n     *     }\n     * ];\n     *\n     * const store = collection(initial_data);\n     *\n     * // Here, we're passing in a `mapper` that returns new objects that\n     * // containing the previous `.positions` values but replace all the\n     * // `.name` values with a specific string\n     * store.map((value, index) => {\n     *     const new_value = {\n     *         name: \"Agent 006\",\n     *         positions: value.positions\n     *     };\n     * });\n     * ```\n     *\n     * You can also partially update every collection item as-well:\n     *\n     * ```javascript\n     * import {collection} from \"svelte-commons/lib/stores/shared\";\n     *\n     * const initial_data = [\n     *     {\n     *         name: \"James Bond\",\n     *         positions: [\"MI6 Agent\"]\n     *     }\n     * ];\n     *\n     * const store = collection(initial_data);\n     *\n     * // Instead of passing a function to `mapper`, we're passing a partial\n     * // object that will be applied to every collection item instead\n     * store.map({name: \"Agent 006\"});\n     * ```\n     */\n    map(mapper: IMapperPartial<T>, mutate?: boolean): T[];\n\n    /**\n     * Pushes the item into the collection, returning the new index\n     *\n     * As a minimal example:\n     *\n     * ```javascript\n     * import {collection} from \"svelte-commons/lib/stores/shared\";\n     *\n     * // If we don't pass a value, it'll just initialize with an empty array\n     * const store = collection();\n     *\n     * // `ICollectionStore.push` works similar to `Array.push`, returning the new length\n     * // of the internal array each push\n     * const index_one = store.push({\n     *     name: \"John Smith\",\n     *     positions: [\"President\", \"Ex-CIA Agent\"]\n     * });\n     *\n     * const index_two = store.push({\n     *     name: \"James Bond\",\n     *     positions: [\"MI6 Agent\", \"Rival of John Smith\"]\n     * });\n     *\n     * console.log(index_one, index_two); // logs `0, 1`\n     * ```\n     */\n    push(item: T): number;\n\n    /**\n     * Returns a filtered copy current collection, with every item that DOES NOT match the `predicate`\n     *\n     * As a minimal example:\n     *\n     * ```javascript\n     * import {collection} from \"svelte-commons/lib/stores/shared\";\n     *\n     * // Define our initial collection payload\n     * const initial_data = [\n     *     {\n     *         name: \"John Smith\",\n     *         positions: [\"President\", \"Ex-CIA Agent\"]\n     *     },\n     *\n     *     {\n     *         name: \"James Bond\",\n     *         positions: [\"MI6 Agent\", \"Rival of John Smith\"]\n     *     }\n     * ];\n     *\n     * const store = collection(initial_data);\n     *\n     * // We reject any object that don't have `James Bond` as their `.name` key\n     * const results = store.reject({name: \"James Bond\"});\n     *\n     * console.log({results}); // logs: `[{name: \"John Smith\", positions: [\"President\", \"Ex-CIA Agent\"]}]`\n     *\n     * // Then we put our results back into the Store\n     * store.set(results);\n     *\n     * // Alternatively, we can also pass in the index of what we want:\n     * // const results = store.reject(1);\n     *\n     * // Or, a function that filters the items manually:\n     * // const results = store.reject((value, index) => value.name === \"James Bond\");\n     * ```\n     *\n     * For simplicity, you can also have [[ICollectionStore.reject]] set the Store value for you:\n     *\n     * ```javascript\n     * import {collection} from \"svelte-commons/lib/stores/shared\";\n     *\n     * const store = collection(...);\n     *\n     * // When passing `true`, `store.set` is called for us. And the\n     * // results is still returned\n     * const results = store.reject({name: \"James Bond\"}, true);\n     * ```\n     */\n    reject(predicate?: IPredicatePartial<T> | null, mutate?: boolean): T[];\n\n    /**\n     * Removes the collection item at the given `index` position, and returns a copy of it\n     *\n     * NOTE: This function throws an exception, if no item was found matching `index`\n     *\n     * ```javascript\n     * import {collection} from \"svelte-commons/lib/stores/shared\";\n     *\n     * // Define our initial collection payload\n     * const initial_data = [\n     *     {\n     *         name: \"John Smith\",\n     *         positions: [\"President\", \"Ex-CIA Agent\"]\n     *     },\n     *\n     *     {\n     *         name: \"James Bond\",\n     *         positions: [\"MI6 Agent\", \"Rival of John Smith\"]\n     *     }\n     * ];\n     *\n     * const store = collection(initial_data);\n     *\n     * // When removing the second collection item (1-index), we\n     * // get the object back as the return value\n     * const results = store.remove(1);\n     *\n     * console.log(results); // logs: `{name: \"James Bond\", positions: [\"MI6 Agent\", \"Rival of John Smith\"]}`\n     * ```\n     */\n    remove(index: number): T;\n\n    /**\n     * Updates the item that matches the given `predicate` with the `updater`\n     *\n     * NOTE: This function errors if no item was found matching `predicate`\n     *\n     * As a minimal example:\n     *\n     * ```javascript\n     * import {collection} from \"svelte-commons/lib/stores/shared\";\n     *\n     * // Define our initial collection payload\n     * const initial_data = [\n     *     {\n     *         name: \"John Smith\",\n     *         positions: [\"President\", \"Ex-CIA Agent\"]\n     *     }\n     * ];\n     *\n     * const store = collection(initial_data);\n     *\n     * // Here, we're caching the very first collection item\n     * const first_find = store.find(0);\n     *\n     * // Next, we're overwriting the item at that index\n     * store.set_item(0, {\n     *     name: \"James Bond\",\n     *     positions: [\"MI6 Agent\", \"Rival of John Smith\"]\n     * });\n     *\n     * // Then, caching our new collection item\n     * const second_find = store.find(0);\n     *\n     * // Since we overwrote the first collection item, our two\n     * // results will not equal each other\n     * console.log(first_find === second_find); // logs: `false`\n     *\n     * // Alternatively, we can pass a filter object to `predicate` instead of an index:\n     * // const first_find = store.set_item({name: \"John Smith\"}, ...);\n     *\n     * // Or even pass a filter function too:\n     * // const first_find = store.set_item((value, index) => value.name === \"John Smith\", ...);\n     * ```\n     *\n     * Every `updater` you pass, actually partially updates the existing collection item:\n     *\n     * ```javascript\n     * import {collection} from \"svelte-commons/lib/stores/shared\";\n     *\n     * // Define our initial collection payload\n     * const initial_data = [\n     *     {\n     *         name: \"James Bond\",\n     *         positions: [\"MI6 Agent\"]\n     *     }\n     * ];\n     *\n     * const store = collection(initial_data);\n     *\n     * const first_find = store.find(0);\n     *\n     * // Here we're applying a partial update to just change the `.name` key\n     * store.set_item(0, {name: \"Agent 006\"});\n     *\n     * const second_find = store.find(0);\n     *\n     * // Since we did a partial update, both cached collection items have similar values\n     *\n     * console.log(first_find); // logs: `{name: \"James Bond\", positions: [\"MI6 Agent\"]}`\n     *\n     * console.log(second_find); // logs: `{name: \"Agent 006\", positions: [\"MI6 Agent\"]}`\n     *\n     * // And since it was a partial update, the `.positions` key on each\n     * // item is actually the exact same array reference\n     * console.log(first_find.positions === second_find.positions) // logs: `true`\n     * ```\n     *\n     * And finally, we can pass a function to `updater` instead:\n     *\n     * ```javascript\n     * import {collection} from \"svelte-commons/lib/stores/shared\";\n     *\n     * // Define our initial collection payload\n     * const initial_data = [\n     *     {\n     *         name: \"James Bond\",\n     *         positions: [\"MI6 Agent\"]\n     *     }\n     * ];\n     *\n     * const store = collection(initial_data);\n     *\n     * // Here, we're passing in an `updater` that returns a new object\n     * // containing the previous `.positions` value and a new `.name` value\n     * store.set_item(0, (value) => {\n     *     const new_value {\n     *         names: \"Agent 006\",\n     *         positions: value.positions\n     *     };\n     *\n     *     return new_value;\n     * });\n     * ```\n     */\n    set_item(predicate: IPredicatePartial<T>, updater: IUpdatePartial<T>): T;\n}\n\n/**\n * Returns a `Writable` Svelte Store that implements [[ICollectionStore]] for interacting with an `Array` of `Object`s\n * @param store\n * @param start\n */\nexport function collection<T extends object>(\n    store: Writable<T[]> | T[] = [],\n    start?: IStoreStartStopNotifier<T[]>\n): ICollectionStore<T> {\n    // Need to support end-developers passing in both initial arrays and stores\n    if (Array.isArray(store)) store = writable(store, start);\n\n    const {update, set, subscribe} = store;\n\n    const filter = (predicate?: IPredicatePartial<T> | null, mutate: boolean = false) => {\n        let array = get(store);\n        array = filter_collection<T>(array, predicate);\n\n        if (mutate) set(array);\n        return array;\n    };\n\n    const find = (predicate?: IPredicatePartial<T> | null) => {\n        const array = get(store);\n        const item = find_collection(array, predicate);\n\n        return item;\n    };\n\n    const _get = () => get(store);\n\n    const map = (mapper: IMapperPartial<T>, mutate: boolean = false) => {\n        let array = get(store);\n        array = map_collection<T>(array, mapper);\n\n        if (mutate) set(array);\n        return array;\n    };\n\n    const push = (item: T) => {\n        const array = get(store);\n        const index = array.push(item);\n\n        set(array);\n        return index;\n    };\n\n    const reject = (predicate?: IPredicatePartial<T> | null, mutate: boolean = false) => {\n        let array = get(store);\n        array = reject_collection<T>(array, predicate);\n\n        if (mutate) set(array);\n        return array;\n    };\n\n    const remove = (index: number): T => {\n        const array = get(store);\n        if (typeof array[index] === \"undefined\") {\n            throw new ReferenceError(\n                `bad dispatch to 'collection.remove_item' (no item at index '${index}')`\n            );\n        }\n\n        const [item] = array.splice(index, 1);\n        set(array);\n\n        return {...item};\n    };\n\n    const set_item = (predicate: IPredicatePartial<T>, updater: IUpdatePartial<T>) => {\n        const array = get(store);\n        const item = find_collection(array, predicate);\n\n        if (!item) {\n            throw new ReferenceError(\n                \"bad dispatch to 'collection.set_item' (no items match predicate)\"\n            );\n        }\n\n        // If there were no updates performed on the target\n        // item, then we can skip and return the copy\n        const [updates, _item] = update_object(item, updater);\n        if (updates < 1) return _item;\n\n        let index = 0;\n        for (const _index in array) {\n            if (array[_index] === item) {\n                index = parseInt(_index);\n                break;\n            }\n        }\n\n        array[index] = _item;\n        set(array);\n\n        return {..._item};\n    };\n\n    return {\n        update,\n        set,\n        subscribe,\n\n        filter,\n        find,\n        map,\n        push,\n        reject,\n        remove,\n        set_item,\n        get: _get\n    };\n}\n","import {Writable} from \"svelte/store\";\n\n/**\n * Represents a function for overlay I/O\n */\nexport type IOverlay<T> = (value: T) => T;\n\n/**\n * Returns a new `Writable` Svelte Store that has it's I/O overlaid with the `read` function for `.subscribe` / `.update` and `.write` function for `.set` / `.update`\n *\n * ```javascript\n * import {writable} from \"svelte/store\";\n *\n * import {overlay} from \"svelte-commons/lib/stores/shared/overlay\";\n *\n * // For the base Store, it's going to maintain the JSON-encoded view of data\n * // passed in. So we need to default it to an empty string\n * const raw_store = writable(\"\");\n *\n * // Here, we're creating a `Writable` \"overlay\" Store, which will encode all\n * // inputs to JSON before writing to the base Store. And then parse all values\n * // from the base Store as JSON, for subscriptions and updater functions\n * const store = overlay(\n *     raw_store,\n *     (value) => JSON.parse(value),\n *     (value) => JSON.stringify(value)\n * );\n *\n * raw_store.subscribe(console.log); // logs: ``\n *\n * // As you can see when `.set` is ran, our base Store's logger\n * // shows the JSON-encoded data\n * store.set({hello: \"world\"}); // logs: `{\"hello\":\"world\"}`\n * ```\n *\n * @param store\n * @param read\n * @param write\n */\nexport function overlay<T>(store: Writable<T>, read: IOverlay<T>, write: IOverlay<T>): Writable<T> {\n    const {set, subscribe, update} = store;\n\n    return {\n        ...store,\n\n        set(value) {\n            value = write(value);\n\n            set(value);\n        },\n\n        subscribe(run, invalidate) {\n            const _run = (value: T) => {\n                value = read(value);\n\n                run(value);\n            };\n\n            return subscribe(_run, invalidate);\n        },\n\n        update(updater) {\n            update((value) => {\n                value = read(value);\n                value = updater(value);\n\n                return write(value);\n            });\n        }\n    };\n}\n","import {Readable, Writable, derived, readable, writable} from \"svelte/store\";\n\nimport {IStoreStartStopNotifier, is_readable, is_writable} from \"../../util/shared/stores\";\n\nimport {overlay} from \"./overlay\";\n\n/**\n * Represents the \"cloner\" function that returns a clone of the input\n */\nexport type ICloner<T> = (value: T) => T;\n\nlet DEPRECATE_READABLE = false;\nlet DEPRECATE_WRITABLE = false;\n\n/**\n * Returns a shallow clone of the `value` object\n *\n * **NOTE**: Only `object` or `Array` types are supported\n *\n * @param value\n */\nfunction clone_value(value: any): any {\n    if (Array.isArray(value)) return [...value];\n    return {...value};\n}\n\n/**\n * Returns a `Readable` / `Writable` Svelte Store, that clones the stored value before every I/O operation, to prevent untracked data mutations\n *\n * **NOTE**: If a non-Store value is passed as `store`, then it will be wrapped in a `Writable` Store\n *\n * **NOTE**: By default, `immutable` can **ONLY** shallow clone `Object`s and `Array`s. If deep or specific cloning is needed, pass a `clone` function\n *\n * For a simple example, in making a `Readable` Store immutable:\n *\n * ```javascript\n * import {readable} from \"svelte/store\";\n * import {immutable} from \"svelte-commons/lib/stores/shared\";\n *\n * const initial_value = {key: \"value\"};\n *\n * const readable_store = readable(initial_value);\n *\n * const store = immutable(readable_store);\n *\n * store.subscribe((value) => {\n *     console.log({initial_value, value});\n *     console.log(value === initial_value);\n * }); // logs: `false`\n * ```\n *\n * Another simple example, but this time making a `Writable` Store immutable:\n *\n * ```javascript\n * import {derived, writable} from \"svelte/store\";\n * import {immutable} from \"svelte-commons/lib/stores/shared\";\n *\n * const initial_value = {key: \"value\"};\n *\n * const writable_store = writable(initial_value);\n *\n * const store = immutable(writable_store);\n *\n * // NOTE: A `derived` Store is used here for simpler looking code\n * const derived_store = derived([writable_store, store], ([$writable, $store]) => {\n *     console.log({$writable, $store});\n *     console.log($writable === $store);\n * });\n *\n * // NOTE: This subscription is just so the `derived` callback starts running\n * derived_store.subscribe(() => {}); // logs: `false`\n *\n * store.set({key: \"not a value!\"}); // logs: `false`\n * ```\n *\n * @param store\n * @param clone\n * @param start\n */\nexport function immutable<T>(\n    store: T | Readable<T> | Writable<T>,\n    clone: ICloner<T> = clone_value,\n    start?: IStoreStartStopNotifier<T>\n): Readable<T> | Writable<T> {\n    // Need to support raw non-Store values being passed, so\n    // we wrap them in a `Writable` Store\n    if (!is_readable(store)) store = writable(store, start);\n\n    if (is_writable(store)) return overlay(store, clone, clone);\n    return derived(store, clone);\n}\n\n// DEPRECATED: The following functions were deprecated, and are now aliases\n\nexport function immutable_readable<T>(\n    store: T | Readable<T>,\n    clone?: ICloner<T>,\n    start?: IStoreStartStopNotifier<T>\n): Readable<T> {\n    if (!DEPRECATE_READABLE) {\n        console.warn(\n            \"[svelte-commons] DEPRECATE: `immutable_readable` is deprecated, use `immutable` directly\"\n        );\n        DEPRECATE_READABLE = true;\n    }\n\n    if (!is_readable(store) && start) store = readable(store, start);\n\n    return immutable(store, clone, start) as Readable<T>;\n}\n\nexport function immutable_writable<T>(\n    store: T | Writable<T>,\n    clone?: ICloner<T>,\n    start?: IStoreStartStopNotifier<T>\n): Writable<T> {\n    if (!DEPRECATE_WRITABLE) {\n        console.warn(\n            \"[svelte-commons] DEPRECATE: `immutable_writable` is deprecated, use `immutable` directly\"\n        );\n        DEPRECATE_WRITABLE = true;\n    }\n\n    return immutable(store, clone, start) as Writable<T>;\n}\n","import {Writable, writable} from \"svelte/store\";\n\nimport {IStoreStartStopNotifier} from \"../../util/shared/stores\";\n\n/**\n * Represents the \"merger\" function that combines the new object, with the previous object. Overwritting existing keys\n */\nexport type IMerger<T extends object> = (previous_object: T, new_object: T) => T;\n\n/**\n * Returns the two objects merged with each other\n * @param previous_object\n * @param new_object\n */\nfunction merge<T>(previous_object: T, new_object: T): T {\n    return {...previous_object, ...new_object};\n}\n\n/**\n * Represents a `Writable` Svelte Store for a Store that performs shallow delta updates to the current object\n *\n * **Without Custom \"Merger\"**\n *\n * ```javascript\n * import {merged} from \"svelte-commons/lib/stores/shared\";\n *\n * // The Store is initialized with an empty base object, which is immutable by default\n * const store = merged({});\n *\n * // Will log every change to the Store\n * store.subscribe(console.log);\n *\n * store.set({first_name: \"John\", last_name: \"Smith\"}); // logs: `{first_name: \"John\", last_name: \"Smith\"}`\n * store.set({first_name: \"Jane\"}); // logs: `{first_name: \"Jane\", last_name: \"Smith\"}`\n * ```\n *\n * **With Custom \"Merger\"**\n *\n * ```javascript\n * import {merged} from \"svelte-commons/lib/stores/shared\";\n *\n * const initial_data = {\n *     name: \"James Bond\",\n *     job: {\n *         title: \"Spy\",\n *         agency: \"MI6\",\n *         country: \"England\"\n *     }\n * };\n *\n * function merger(a, b) {\n *     // By default, the default \"Merger\" only merges the top-level object keys, and spreads\n *     // all of them. For more performance, and to target nested keys, we can use a custom function\n *     const { name: a_name, job: a_job = {} } = a;\n *     const { name: b_name, job: b_job = {} } = b;\n *\n *     return {\n *         name: b_name || a_name,\n *         job: {\n *             title: b_job.title || a_job.title,\n *             agency: b_job.agency || a_job.agency,\n *             country: b_job.country || a_job.country\n *         }\n *     };\n * }\n *\n * // The Store is initialized with an empty base object, which is immutable by default\n * const store = merged(initial_data, merger);\n *\n * // Will log every change to the Store\n * store.subscribe(console.log); // logs: `{name:\"James Bond\",job:{title:\"Spy\",agency:\"MI6\",country:\"England\"}}`\n *\n * store.set({job: {agency: \"FBI\", country: \"USA\"}}); // logs: `{name:\"James Bond\",job:{title:\"Spy\",agency:\"FBI\",country:\"USA\"}}`\n * ```\n *\n * @param {*} value\n * @param {*} start\n */\nexport function merged<T extends object>(\n    value: T,\n    merger: IMerger<T> = merge,\n    start?: IStoreStartStopNotifier<T>\n): Writable<T> {\n    const {set, subscribe, update} = writable(value, start);\n\n    return {\n        subscribe,\n\n        set(new_value) {\n            value = merger(value, new_value);\n\n            set(value);\n        },\n\n        update(func) {\n            update((value) => {\n                return merger(value, func(value));\n            });\n        }\n    };\n}\n","/*\r\nAuthor: Geraint Luff and others\r\nYear: 2013\r\n\r\nThis code is released into the \"public domain\" by its author(s).  Anybody may use, alter and distribute the code without restriction.  The author makes no guarantees, and takes no liability of any kind for use of this code.\r\n\r\nIf you find a bug or make an improvement, it would be courteous to let the author know, but it is not compulsory.\r\n*/\r\n(function (global, factory) {\r\n  if (typeof define === 'function' && define.amd) {\r\n    // AMD. Register as an anonymous module.\r\n    define([], factory);\r\n  } else if (typeof module !== 'undefined' && module.exports){\r\n    // CommonJS. Define export.\r\n    module.exports = factory();\r\n  } else {\r\n    // Browser globals\r\n    global.tv4 = factory();\r\n  }\r\n}(this, function () {\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FObject%2Fkeys\r\nif (!Object.keys) {\r\n\tObject.keys = (function () {\r\n\t\tvar hasOwnProperty = Object.prototype.hasOwnProperty,\r\n\t\t\thasDontEnumBug = !({toString: null}).propertyIsEnumerable('toString'),\r\n\t\t\tdontEnums = [\r\n\t\t\t\t'toString',\r\n\t\t\t\t'toLocaleString',\r\n\t\t\t\t'valueOf',\r\n\t\t\t\t'hasOwnProperty',\r\n\t\t\t\t'isPrototypeOf',\r\n\t\t\t\t'propertyIsEnumerable',\r\n\t\t\t\t'constructor'\r\n\t\t\t],\r\n\t\t\tdontEnumsLength = dontEnums.length;\r\n\r\n\t\treturn function (obj) {\r\n\t\t\tif (typeof obj !== 'object' && typeof obj !== 'function' || obj === null) {\r\n\t\t\t\tthrow new TypeError('Object.keys called on non-object');\r\n\t\t\t}\r\n\r\n\t\t\tvar result = [];\r\n\r\n\t\t\tfor (var prop in obj) {\r\n\t\t\t\tif (hasOwnProperty.call(obj, prop)) {\r\n\t\t\t\t\tresult.push(prop);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (hasDontEnumBug) {\r\n\t\t\t\tfor (var i=0; i < dontEnumsLength; i++) {\r\n\t\t\t\t\tif (hasOwnProperty.call(obj, dontEnums[i])) {\r\n\t\t\t\t\t\tresult.push(dontEnums[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\t})();\r\n}\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create\r\nif (!Object.create) {\r\n\tObject.create = (function(){\r\n\t\tfunction F(){}\r\n\r\n\t\treturn function(o){\r\n\t\t\tif (arguments.length !== 1) {\r\n\t\t\t\tthrow new Error('Object.create implementation only accepts one parameter.');\r\n\t\t\t}\r\n\t\t\tF.prototype = o;\r\n\t\t\treturn new F();\r\n\t\t};\r\n\t})();\r\n}\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FArray%2FisArray\r\nif(!Array.isArray) {\r\n\tArray.isArray = function (vArg) {\r\n\t\treturn Object.prototype.toString.call(vArg) === \"[object Array]\";\r\n\t};\r\n}\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FArray%2FindexOf\r\nif (!Array.prototype.indexOf) {\r\n\tArray.prototype.indexOf = function (searchElement /*, fromIndex */ ) {\r\n\t\tif (this === null) {\r\n\t\t\tthrow new TypeError();\r\n\t\t}\r\n\t\tvar t = Object(this);\r\n\t\tvar len = t.length >>> 0;\r\n\r\n\t\tif (len === 0) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tvar n = 0;\r\n\t\tif (arguments.length > 1) {\r\n\t\t\tn = Number(arguments[1]);\r\n\t\t\tif (n !== n) { // shortcut for verifying if it's NaN\r\n\t\t\t\tn = 0;\r\n\t\t\t} else if (n !== 0 && n !== Infinity && n !== -Infinity) {\r\n\t\t\t\tn = (n > 0 || -1) * Math.floor(Math.abs(n));\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (n >= len) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tvar k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\r\n\t\tfor (; k < len; k++) {\r\n\t\t\tif (k in t && t[k] === searchElement) {\r\n\t\t\t\treturn k;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n}\r\n\r\n// Grungey Object.isFrozen hack\r\nif (!Object.isFrozen) {\r\n\tObject.isFrozen = function (obj) {\r\n\t\tvar key = \"tv4_test_frozen_key\";\r\n\t\twhile (obj.hasOwnProperty(key)) {\r\n\t\t\tkey += Math.random();\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tobj[key] = true;\r\n\t\t\tdelete obj[key];\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n}\r\n// Based on: https://github.com/geraintluff/uri-templates, but with all the de-substitution stuff removed\r\n\r\nvar uriTemplateGlobalModifiers = {\r\n\t\"+\": true,\r\n\t\"#\": true,\r\n\t\".\": true,\r\n\t\"/\": true,\r\n\t\";\": true,\r\n\t\"?\": true,\r\n\t\"&\": true\r\n};\r\nvar uriTemplateSuffices = {\r\n\t\"*\": true\r\n};\r\n\r\nfunction notReallyPercentEncode(string) {\r\n\treturn encodeURI(string).replace(/%25[0-9][0-9]/g, function (doubleEncoded) {\r\n\t\treturn \"%\" + doubleEncoded.substring(3);\r\n\t});\r\n}\r\n\r\nfunction uriTemplateSubstitution(spec) {\r\n\tvar modifier = \"\";\r\n\tif (uriTemplateGlobalModifiers[spec.charAt(0)]) {\r\n\t\tmodifier = spec.charAt(0);\r\n\t\tspec = spec.substring(1);\r\n\t}\r\n\tvar separator = \"\";\r\n\tvar prefix = \"\";\r\n\tvar shouldEscape = true;\r\n\tvar showVariables = false;\r\n\tvar trimEmptyString = false;\r\n\tif (modifier === '+') {\r\n\t\tshouldEscape = false;\r\n\t} else if (modifier === \".\") {\r\n\t\tprefix = \".\";\r\n\t\tseparator = \".\";\r\n\t} else if (modifier === \"/\") {\r\n\t\tprefix = \"/\";\r\n\t\tseparator = \"/\";\r\n\t} else if (modifier === '#') {\r\n\t\tprefix = \"#\";\r\n\t\tshouldEscape = false;\r\n\t} else if (modifier === ';') {\r\n\t\tprefix = \";\";\r\n\t\tseparator = \";\";\r\n\t\tshowVariables = true;\r\n\t\ttrimEmptyString = true;\r\n\t} else if (modifier === '?') {\r\n\t\tprefix = \"?\";\r\n\t\tseparator = \"&\";\r\n\t\tshowVariables = true;\r\n\t} else if (modifier === '&') {\r\n\t\tprefix = \"&\";\r\n\t\tseparator = \"&\";\r\n\t\tshowVariables = true;\r\n\t}\r\n\r\n\tvar varNames = [];\r\n\tvar varList = spec.split(\",\");\r\n\tvar varSpecs = [];\r\n\tvar varSpecMap = {};\r\n\tfor (var i = 0; i < varList.length; i++) {\r\n\t\tvar varName = varList[i];\r\n\t\tvar truncate = null;\r\n\t\tif (varName.indexOf(\":\") !== -1) {\r\n\t\t\tvar parts = varName.split(\":\");\r\n\t\t\tvarName = parts[0];\r\n\t\t\ttruncate = parseInt(parts[1], 10);\r\n\t\t}\r\n\t\tvar suffices = {};\r\n\t\twhile (uriTemplateSuffices[varName.charAt(varName.length - 1)]) {\r\n\t\t\tsuffices[varName.charAt(varName.length - 1)] = true;\r\n\t\t\tvarName = varName.substring(0, varName.length - 1);\r\n\t\t}\r\n\t\tvar varSpec = {\r\n\t\t\ttruncate: truncate,\r\n\t\t\tname: varName,\r\n\t\t\tsuffices: suffices\r\n\t\t};\r\n\t\tvarSpecs.push(varSpec);\r\n\t\tvarSpecMap[varName] = varSpec;\r\n\t\tvarNames.push(varName);\r\n\t}\r\n\tvar subFunction = function (valueFunction) {\r\n\t\tvar result = \"\";\r\n\t\tvar startIndex = 0;\r\n\t\tfor (var i = 0; i < varSpecs.length; i++) {\r\n\t\t\tvar varSpec = varSpecs[i];\r\n\t\t\tvar value = valueFunction(varSpec.name);\r\n\t\t\tif (value === null || value === undefined || (Array.isArray(value) && value.length === 0) || (typeof value === 'object' && Object.keys(value).length === 0)) {\r\n\t\t\t\tstartIndex++;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (i === startIndex) {\r\n\t\t\t\tresult += prefix;\r\n\t\t\t} else {\r\n\t\t\t\tresult += (separator || \",\");\r\n\t\t\t}\r\n\t\t\tif (Array.isArray(value)) {\r\n\t\t\t\tif (showVariables) {\r\n\t\t\t\t\tresult += varSpec.name + \"=\";\r\n\t\t\t\t}\r\n\t\t\t\tfor (var j = 0; j < value.length; j++) {\r\n\t\t\t\t\tif (j > 0) {\r\n\t\t\t\t\t\tresult += varSpec.suffices['*'] ? (separator || \",\") : \",\";\r\n\t\t\t\t\t\tif (varSpec.suffices['*'] && showVariables) {\r\n\t\t\t\t\t\t\tresult += varSpec.name + \"=\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(value[j]).replace(/!/g, \"%21\") : notReallyPercentEncode(value[j]);\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof value === \"object\") {\r\n\t\t\t\tif (showVariables && !varSpec.suffices['*']) {\r\n\t\t\t\t\tresult += varSpec.name + \"=\";\r\n\t\t\t\t}\r\n\t\t\t\tvar first = true;\r\n\t\t\t\tfor (var key in value) {\r\n\t\t\t\t\tif (!first) {\r\n\t\t\t\t\t\tresult += varSpec.suffices['*'] ? (separator || \",\") : \",\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfirst = false;\r\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(key).replace(/!/g, \"%21\") : notReallyPercentEncode(key);\r\n\t\t\t\t\tresult += varSpec.suffices['*'] ? '=' : \",\";\r\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(value[key]).replace(/!/g, \"%21\") : notReallyPercentEncode(value[key]);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (showVariables) {\r\n\t\t\t\t\tresult += varSpec.name;\r\n\t\t\t\t\tif (!trimEmptyString || value !== \"\") {\r\n\t\t\t\t\t\tresult += \"=\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (varSpec.truncate != null) {\r\n\t\t\t\t\tvalue = value.substring(0, varSpec.truncate);\r\n\t\t\t\t}\r\n\t\t\t\tresult += shouldEscape ? encodeURIComponent(value).replace(/!/g, \"%21\"): notReallyPercentEncode(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t};\r\n\tsubFunction.varNames = varNames;\r\n\treturn {\r\n\t\tprefix: prefix,\r\n\t\tsubstitution: subFunction\r\n\t};\r\n}\r\n\r\nfunction UriTemplate(template) {\r\n\tif (!(this instanceof UriTemplate)) {\r\n\t\treturn new UriTemplate(template);\r\n\t}\r\n\tvar parts = template.split(\"{\");\r\n\tvar textParts = [parts.shift()];\r\n\tvar prefixes = [];\r\n\tvar substitutions = [];\r\n\tvar varNames = [];\r\n\twhile (parts.length > 0) {\r\n\t\tvar part = parts.shift();\r\n\t\tvar spec = part.split(\"}\")[0];\r\n\t\tvar remainder = part.substring(spec.length + 1);\r\n\t\tvar funcs = uriTemplateSubstitution(spec);\r\n\t\tsubstitutions.push(funcs.substitution);\r\n\t\tprefixes.push(funcs.prefix);\r\n\t\ttextParts.push(remainder);\r\n\t\tvarNames = varNames.concat(funcs.substitution.varNames);\r\n\t}\r\n\tthis.fill = function (valueFunction) {\r\n\t\tvar result = textParts[0];\r\n\t\tfor (var i = 0; i < substitutions.length; i++) {\r\n\t\t\tvar substitution = substitutions[i];\r\n\t\t\tresult += substitution(valueFunction);\r\n\t\t\tresult += textParts[i + 1];\r\n\t\t}\r\n\t\treturn result;\r\n\t};\r\n\tthis.varNames = varNames;\r\n\tthis.template = template;\r\n}\r\nUriTemplate.prototype = {\r\n\ttoString: function () {\r\n\t\treturn this.template;\r\n\t},\r\n\tfillFromObject: function (obj) {\r\n\t\treturn this.fill(function (varName) {\r\n\t\t\treturn obj[varName];\r\n\t\t});\r\n\t}\r\n};\r\nvar ValidatorContext = function ValidatorContext(parent, collectMultiple, errorReporter, checkRecursive, trackUnknownProperties) {\r\n\tthis.missing = [];\r\n\tthis.missingMap = {};\r\n\tthis.formatValidators = parent ? Object.create(parent.formatValidators) : {};\r\n\tthis.schemas = parent ? Object.create(parent.schemas) : {};\r\n\tthis.collectMultiple = collectMultiple;\r\n\tthis.errors = [];\r\n\tthis.handleError = collectMultiple ? this.collectError : this.returnError;\r\n\tif (checkRecursive) {\r\n\t\tthis.checkRecursive = true;\r\n\t\tthis.scanned = [];\r\n\t\tthis.scannedFrozen = [];\r\n\t\tthis.scannedFrozenSchemas = [];\r\n\t\tthis.scannedFrozenValidationErrors = [];\r\n\t\tthis.validatedSchemasKey = 'tv4_validation_id';\r\n\t\tthis.validationErrorsKey = 'tv4_validation_errors_id';\r\n\t}\r\n\tif (trackUnknownProperties) {\r\n\t\tthis.trackUnknownProperties = true;\r\n\t\tthis.knownPropertyPaths = {};\r\n\t\tthis.unknownPropertyPaths = {};\r\n\t}\r\n\tthis.errorReporter = errorReporter || defaultErrorReporter('en');\r\n\tif (typeof this.errorReporter === 'string') {\r\n\t\tthrow new Error('debug');\r\n\t}\r\n\tthis.definedKeywords = {};\r\n\tif (parent) {\r\n\t\tfor (var key in parent.definedKeywords) {\r\n\t\t\tthis.definedKeywords[key] = parent.definedKeywords[key].slice(0);\r\n\t\t}\r\n\t}\r\n};\r\nValidatorContext.prototype.defineKeyword = function (keyword, keywordFunction) {\r\n\tthis.definedKeywords[keyword] = this.definedKeywords[keyword] || [];\r\n\tthis.definedKeywords[keyword].push(keywordFunction);\r\n};\r\nValidatorContext.prototype.createError = function (code, messageParams, dataPath, schemaPath, subErrors, data, schema) {\r\n\tvar error = new ValidationError(code, messageParams, dataPath, schemaPath, subErrors);\r\n\terror.message = this.errorReporter(error, data, schema);\r\n\treturn error;\r\n};\r\nValidatorContext.prototype.returnError = function (error) {\r\n\treturn error;\r\n};\r\nValidatorContext.prototype.collectError = function (error) {\r\n\tif (error) {\r\n\t\tthis.errors.push(error);\r\n\t}\r\n\treturn null;\r\n};\r\nValidatorContext.prototype.prefixErrors = function (startIndex, dataPath, schemaPath) {\r\n\tfor (var i = startIndex; i < this.errors.length; i++) {\r\n\t\tthis.errors[i] = this.errors[i].prefixWith(dataPath, schemaPath);\r\n\t}\r\n\treturn this;\r\n};\r\nValidatorContext.prototype.banUnknownProperties = function (data, schema) {\r\n\tfor (var unknownPath in this.unknownPropertyPaths) {\r\n\t\tvar error = this.createError(ErrorCodes.UNKNOWN_PROPERTY, {path: unknownPath}, unknownPath, \"\", null, data, schema);\r\n\t\tvar result = this.handleError(error);\r\n\t\tif (result) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.addFormat = function (format, validator) {\r\n\tif (typeof format === 'object') {\r\n\t\tfor (var key in format) {\r\n\t\t\tthis.addFormat(key, format[key]);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\tthis.formatValidators[format] = validator;\r\n};\r\nValidatorContext.prototype.resolveRefs = function (schema, urlHistory) {\r\n\tif (schema['$ref'] !== undefined) {\r\n\t\turlHistory = urlHistory || {};\r\n\t\tif (urlHistory[schema['$ref']]) {\r\n\t\t\treturn this.createError(ErrorCodes.CIRCULAR_REFERENCE, {urls: Object.keys(urlHistory).join(', ')}, '', '', null, undefined, schema);\r\n\t\t}\r\n\t\turlHistory[schema['$ref']] = true;\r\n\t\tschema = this.getSchema(schema['$ref'], urlHistory);\r\n\t}\r\n\treturn schema;\r\n};\r\nValidatorContext.prototype.getSchema = function (url, urlHistory) {\r\n\tvar schema;\r\n\tif (this.schemas[url] !== undefined) {\r\n\t\tschema = this.schemas[url];\r\n\t\treturn this.resolveRefs(schema, urlHistory);\r\n\t}\r\n\tvar baseUrl = url;\r\n\tvar fragment = \"\";\r\n\tif (url.indexOf('#') !== -1) {\r\n\t\tfragment = url.substring(url.indexOf(\"#\") + 1);\r\n\t\tbaseUrl = url.substring(0, url.indexOf(\"#\"));\r\n\t}\r\n\tif (typeof this.schemas[baseUrl] === 'object') {\r\n\t\tschema = this.schemas[baseUrl];\r\n\t\tvar pointerPath = decodeURIComponent(fragment);\r\n\t\tif (pointerPath === \"\") {\r\n\t\t\treturn this.resolveRefs(schema, urlHistory);\r\n\t\t} else if (pointerPath.charAt(0) !== \"/\") {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tvar parts = pointerPath.split(\"/\").slice(1);\r\n\t\tfor (var i = 0; i < parts.length; i++) {\r\n\t\t\tvar component = parts[i].replace(/~1/g, \"/\").replace(/~0/g, \"~\");\r\n\t\t\tif (schema[component] === undefined) {\r\n\t\t\t\tschema = undefined;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tschema = schema[component];\r\n\t\t}\r\n\t\tif (schema !== undefined) {\r\n\t\t\treturn this.resolveRefs(schema, urlHistory);\r\n\t\t}\r\n\t}\r\n\tif (this.missing[baseUrl] === undefined) {\r\n\t\tthis.missing.push(baseUrl);\r\n\t\tthis.missing[baseUrl] = baseUrl;\r\n\t\tthis.missingMap[baseUrl] = baseUrl;\r\n\t}\r\n};\r\nValidatorContext.prototype.searchSchemas = function (schema, url) {\r\n\tif (Array.isArray(schema)) {\r\n\t\tfor (var i = 0; i < schema.length; i++) {\r\n\t\t\tthis.searchSchemas(schema[i], url);\r\n\t\t}\r\n\t} else if (schema && typeof schema === \"object\") {\r\n\t\tif (typeof schema.id === \"string\") {\r\n\t\t\tif (isTrustedUrl(url, schema.id)) {\r\n\t\t\t\tif (this.schemas[schema.id] === undefined) {\r\n\t\t\t\t\tthis.schemas[schema.id] = schema;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var key in schema) {\r\n\t\t\tif (key !== \"enum\") {\r\n\t\t\t\tif (typeof schema[key] === \"object\") {\r\n\t\t\t\t\tthis.searchSchemas(schema[key], url);\r\n\t\t\t\t} else if (key === \"$ref\") {\r\n\t\t\t\t\tvar uri = getDocumentUri(schema[key]);\r\n\t\t\t\t\tif (uri && this.schemas[uri] === undefined && this.missingMap[uri] === undefined) {\r\n\t\t\t\t\t\tthis.missingMap[uri] = uri;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\nValidatorContext.prototype.addSchema = function (url, schema) {\r\n\t//overload\r\n\tif (typeof url !== 'string' || typeof schema === 'undefined') {\r\n\t\tif (typeof url === 'object' && typeof url.id === 'string') {\r\n\t\t\tschema = url;\r\n\t\t\turl = schema.id;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\tif (url === getDocumentUri(url) + \"#\") {\r\n\t\t// Remove empty fragment\r\n\t\turl = getDocumentUri(url);\r\n\t}\r\n\tthis.schemas[url] = schema;\r\n\tdelete this.missingMap[url];\r\n\tnormSchema(schema, url);\r\n\tthis.searchSchemas(schema, url);\r\n};\r\n\r\nValidatorContext.prototype.getSchemaMap = function () {\r\n\tvar map = {};\r\n\tfor (var key in this.schemas) {\r\n\t\tmap[key] = this.schemas[key];\r\n\t}\r\n\treturn map;\r\n};\r\n\r\nValidatorContext.prototype.getSchemaUris = function (filterRegExp) {\r\n\tvar list = [];\r\n\tfor (var key in this.schemas) {\r\n\t\tif (!filterRegExp || filterRegExp.test(key)) {\r\n\t\t\tlist.push(key);\r\n\t\t}\r\n\t}\r\n\treturn list;\r\n};\r\n\r\nValidatorContext.prototype.getMissingUris = function (filterRegExp) {\r\n\tvar list = [];\r\n\tfor (var key in this.missingMap) {\r\n\t\tif (!filterRegExp || filterRegExp.test(key)) {\r\n\t\t\tlist.push(key);\r\n\t\t}\r\n\t}\r\n\treturn list;\r\n};\r\n\r\nValidatorContext.prototype.dropSchemas = function () {\r\n\tthis.schemas = {};\r\n\tthis.reset();\r\n};\r\nValidatorContext.prototype.reset = function () {\r\n\tthis.missing = [];\r\n\tthis.missingMap = {};\r\n\tthis.errors = [];\r\n};\r\n\r\nValidatorContext.prototype.validateAll = function (data, schema, dataPathParts, schemaPathParts, dataPointerPath) {\r\n\tvar topLevel;\r\n\tschema = this.resolveRefs(schema);\r\n\tif (!schema) {\r\n\t\treturn null;\r\n\t} else if (schema instanceof ValidationError) {\r\n\t\tthis.errors.push(schema);\r\n\t\treturn schema;\r\n\t}\r\n\r\n\tvar startErrorCount = this.errors.length;\r\n\tvar frozenIndex, scannedFrozenSchemaIndex = null, scannedSchemasIndex = null;\r\n\tif (this.checkRecursive && data && typeof data === 'object') {\r\n\t\ttopLevel = !this.scanned.length;\r\n\t\tif (data[this.validatedSchemasKey]) {\r\n\t\t\tvar schemaIndex = data[this.validatedSchemasKey].indexOf(schema);\r\n\t\t\tif (schemaIndex !== -1) {\r\n\t\t\t\tthis.errors = this.errors.concat(data[this.validationErrorsKey][schemaIndex]);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (Object.isFrozen(data)) {\r\n\t\t\tfrozenIndex = this.scannedFrozen.indexOf(data);\r\n\t\t\tif (frozenIndex !== -1) {\r\n\t\t\t\tvar frozenSchemaIndex = this.scannedFrozenSchemas[frozenIndex].indexOf(schema);\r\n\t\t\t\tif (frozenSchemaIndex !== -1) {\r\n\t\t\t\t\tthis.errors = this.errors.concat(this.scannedFrozenValidationErrors[frozenIndex][frozenSchemaIndex]);\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.scanned.push(data);\r\n\t\tif (Object.isFrozen(data)) {\r\n\t\t\tif (frozenIndex === -1) {\r\n\t\t\t\tfrozenIndex = this.scannedFrozen.length;\r\n\t\t\t\tthis.scannedFrozen.push(data);\r\n\t\t\t\tthis.scannedFrozenSchemas.push([]);\r\n\t\t\t}\r\n\t\t\tscannedFrozenSchemaIndex = this.scannedFrozenSchemas[frozenIndex].length;\r\n\t\t\tthis.scannedFrozenSchemas[frozenIndex][scannedFrozenSchemaIndex] = schema;\r\n\t\t\tthis.scannedFrozenValidationErrors[frozenIndex][scannedFrozenSchemaIndex] = [];\r\n\t\t} else {\r\n\t\t\tif (!data[this.validatedSchemasKey]) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tObject.defineProperty(data, this.validatedSchemasKey, {\r\n\t\t\t\t\t\tvalue: [],\r\n\t\t\t\t\t\tconfigurable: true\r\n\t\t\t\t\t});\r\n\t\t\t\t\tObject.defineProperty(data, this.validationErrorsKey, {\r\n\t\t\t\t\t\tvalue: [],\r\n\t\t\t\t\t\tconfigurable: true\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t//IE 7/8 workaround\r\n\t\t\t\t\tdata[this.validatedSchemasKey] = [];\r\n\t\t\t\t\tdata[this.validationErrorsKey] = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tscannedSchemasIndex = data[this.validatedSchemasKey].length;\r\n\t\t\tdata[this.validatedSchemasKey][scannedSchemasIndex] = schema;\r\n\t\t\tdata[this.validationErrorsKey][scannedSchemasIndex] = [];\r\n\t\t}\r\n\t}\r\n\r\n\tvar errorCount = this.errors.length;\r\n\tvar error = this.validateBasic(data, schema, dataPointerPath)\r\n\t\t|| this.validateNumeric(data, schema, dataPointerPath)\r\n\t\t|| this.validateString(data, schema, dataPointerPath)\r\n\t\t|| this.validateArray(data, schema, dataPointerPath)\r\n\t\t|| this.validateObject(data, schema, dataPointerPath)\r\n\t\t|| this.validateCombinations(data, schema, dataPointerPath)\r\n\t\t|| this.validateHypermedia(data, schema, dataPointerPath)\r\n\t\t|| this.validateFormat(data, schema, dataPointerPath)\r\n\t\t|| this.validateDefinedKeywords(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n\r\n\tif (topLevel) {\r\n\t\twhile (this.scanned.length) {\r\n\t\t\tvar item = this.scanned.pop();\r\n\t\t\tdelete item[this.validatedSchemasKey];\r\n\t\t}\r\n\t\tthis.scannedFrozen = [];\r\n\t\tthis.scannedFrozenSchemas = [];\r\n\t}\r\n\r\n\tif (error || errorCount !== this.errors.length) {\r\n\t\twhile ((dataPathParts && dataPathParts.length) || (schemaPathParts && schemaPathParts.length)) {\r\n\t\t\tvar dataPart = (dataPathParts && dataPathParts.length) ? \"\" + dataPathParts.pop() : null;\r\n\t\t\tvar schemaPart = (schemaPathParts && schemaPathParts.length) ? \"\" + schemaPathParts.pop() : null;\r\n\t\t\tif (error) {\r\n\t\t\t\terror = error.prefixWith(dataPart, schemaPart);\r\n\t\t\t}\r\n\t\t\tthis.prefixErrors(errorCount, dataPart, schemaPart);\r\n\t\t}\r\n\t}\r\n\r\n\tif (scannedFrozenSchemaIndex !== null) {\r\n\t\tthis.scannedFrozenValidationErrors[frozenIndex][scannedFrozenSchemaIndex] = this.errors.slice(startErrorCount);\r\n\t} else if (scannedSchemasIndex !== null) {\r\n\t\tdata[this.validationErrorsKey][scannedSchemasIndex] = this.errors.slice(startErrorCount);\r\n\t}\r\n\r\n\treturn this.handleError(error);\r\n};\r\nValidatorContext.prototype.validateFormat = function (data, schema) {\r\n\tif (typeof schema.format !== 'string' || !this.formatValidators[schema.format]) {\r\n\t\treturn null;\r\n\t}\r\n\tvar errorMessage = this.formatValidators[schema.format].call(null, data, schema);\r\n\tif (typeof errorMessage === 'string' || typeof errorMessage === 'number') {\r\n\t\treturn this.createError(ErrorCodes.FORMAT_CUSTOM, {message: errorMessage}, '', '/format', null, data, schema);\r\n\t} else if (errorMessage && typeof errorMessage === 'object') {\r\n\t\treturn this.createError(ErrorCodes.FORMAT_CUSTOM, {message: errorMessage.message || \"?\"}, errorMessage.dataPath || '', errorMessage.schemaPath || \"/format\", null, data, schema);\r\n\t}\r\n\treturn null;\r\n};\r\nValidatorContext.prototype.validateDefinedKeywords = function (data, schema, dataPointerPath) {\r\n\tfor (var key in this.definedKeywords) {\r\n\t\tif (typeof schema[key] === 'undefined') {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tvar validationFunctions = this.definedKeywords[key];\r\n\t\tfor (var i = 0; i < validationFunctions.length; i++) {\r\n\t\t\tvar func = validationFunctions[i];\r\n\t\t\tvar result = func(data, schema[key], schema, dataPointerPath);\r\n\t\t\tif (typeof result === 'string' || typeof result === 'number') {\r\n\t\t\t\treturn this.createError(ErrorCodes.KEYWORD_CUSTOM, {key: key, message: result}, '', '', null, data, schema).prefixWith(null, key);\r\n\t\t\t} else if (result && typeof result === 'object') {\r\n\t\t\t\tvar code = result.code;\r\n\t\t\t\tif (typeof code === 'string') {\r\n\t\t\t\t\tif (!ErrorCodes[code]) {\r\n\t\t\t\t\t\tthrow new Error('Undefined error code (use defineError): ' + code);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcode = ErrorCodes[code];\r\n\t\t\t\t} else if (typeof code !== 'number') {\r\n\t\t\t\t\tcode = ErrorCodes.KEYWORD_CUSTOM;\r\n\t\t\t\t}\r\n\t\t\t\tvar messageParams = (typeof result.message === 'object') ? result.message : {key: key, message: result.message || \"?\"};\r\n\t\t\t\tvar schemaPath = result.schemaPath || (\"/\" + key.replace(/~/g, '~0').replace(/\\//g, '~1'));\r\n\t\t\t\treturn this.createError(code, messageParams, result.dataPath || null, schemaPath, null, data, schema);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nfunction recursiveCompare(A, B) {\r\n\tif (A === B) {\r\n\t\treturn true;\r\n\t}\r\n\tif (A && B && typeof A === \"object\" && typeof B === \"object\") {\r\n\t\tif (Array.isArray(A) !== Array.isArray(B)) {\r\n\t\t\treturn false;\r\n\t\t} else if (Array.isArray(A)) {\r\n\t\t\tif (A.length !== B.length) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < A.length; i++) {\r\n\t\t\t\tif (!recursiveCompare(A[i], B[i])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar key;\r\n\t\t\tfor (key in A) {\r\n\t\t\t\tif (B[key] === undefined && A[key] !== undefined) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (key in B) {\r\n\t\t\t\tif (A[key] === undefined && B[key] !== undefined) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (key in A) {\r\n\t\t\t\tif (!recursiveCompare(A[key], B[key])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nValidatorContext.prototype.validateBasic = function validateBasic(data, schema, dataPointerPath) {\r\n\tvar error;\r\n\tif (error = this.validateType(data, schema, dataPointerPath)) {\r\n\t\treturn error.prefixWith(null, \"type\");\r\n\t}\r\n\tif (error = this.validateEnum(data, schema, dataPointerPath)) {\r\n\t\treturn error.prefixWith(null, \"type\");\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateType = function validateType(data, schema) {\r\n\tif (schema.type === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar dataType = typeof data;\r\n\tif (data === null) {\r\n\t\tdataType = \"null\";\r\n\t} else if (Array.isArray(data)) {\r\n\t\tdataType = \"array\";\r\n\t}\r\n\tvar allowedTypes = schema.type;\r\n\tif (!Array.isArray(allowedTypes)) {\r\n\t\tallowedTypes = [allowedTypes];\r\n\t}\r\n\r\n\tfor (var i = 0; i < allowedTypes.length; i++) {\r\n\t\tvar type = allowedTypes[i];\r\n\t\tif (type === dataType || (type === \"integer\" && dataType === \"number\" && (data % 1 === 0))) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\treturn this.createError(ErrorCodes.INVALID_TYPE, {type: dataType, expected: allowedTypes.join(\"/\")}, '', '', null, data, schema);\r\n};\r\n\r\nValidatorContext.prototype.validateEnum = function validateEnum(data, schema) {\r\n\tif (schema[\"enum\"] === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tfor (var i = 0; i < schema[\"enum\"].length; i++) {\r\n\t\tvar enumVal = schema[\"enum\"][i];\r\n\t\tif (recursiveCompare(data, enumVal)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\treturn this.createError(ErrorCodes.ENUM_MISMATCH, {value: (typeof JSON !== 'undefined') ? JSON.stringify(data) : data}, '', '', null, data, schema);\r\n};\r\n\r\nValidatorContext.prototype.validateNumeric = function validateNumeric(data, schema, dataPointerPath) {\r\n\treturn this.validateMultipleOf(data, schema, dataPointerPath)\r\n\t\t|| this.validateMinMax(data, schema, dataPointerPath)\r\n\t\t|| this.validateNaN(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n};\r\n\r\nvar CLOSE_ENOUGH_LOW = Math.pow(2, -51);\r\nvar CLOSE_ENOUGH_HIGH = 1 - CLOSE_ENOUGH_LOW;\r\nValidatorContext.prototype.validateMultipleOf = function validateMultipleOf(data, schema) {\r\n\tvar multipleOf = schema.multipleOf || schema.divisibleBy;\r\n\tif (multipleOf === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tif (typeof data === \"number\") {\r\n\t\tvar remainder = (data/multipleOf)%1;\r\n\t\tif (remainder >= CLOSE_ENOUGH_LOW && remainder < CLOSE_ENOUGH_HIGH) {\r\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MULTIPLE_OF, {value: data, multipleOf: multipleOf}, '', '', null, data, schema);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateMinMax = function validateMinMax(data, schema) {\r\n\tif (typeof data !== \"number\") {\r\n\t\treturn null;\r\n\t}\r\n\tif (schema.minimum !== undefined) {\r\n\t\tif (data < schema.minimum) {\r\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MINIMUM, {value: data, minimum: schema.minimum}, '', '/minimum', null, data, schema);\r\n\t\t}\r\n\t\tif (schema.exclusiveMinimum && data === schema.minimum) {\r\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MINIMUM_EXCLUSIVE, {value: data, minimum: schema.minimum}, '', '/exclusiveMinimum', null, data, schema);\r\n\t\t}\r\n\t}\r\n\tif (schema.maximum !== undefined) {\r\n\t\tif (data > schema.maximum) {\r\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MAXIMUM, {value: data, maximum: schema.maximum}, '', '/maximum', null, data, schema);\r\n\t\t}\r\n\t\tif (schema.exclusiveMaximum && data === schema.maximum) {\r\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MAXIMUM_EXCLUSIVE, {value: data, maximum: schema.maximum}, '', '/exclusiveMaximum', null, data, schema);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateNaN = function validateNaN(data, schema) {\r\n\tif (typeof data !== \"number\") {\r\n\t\treturn null;\r\n\t}\r\n\tif (isNaN(data) === true || data === Infinity || data === -Infinity) {\r\n\t\treturn this.createError(ErrorCodes.NUMBER_NOT_A_NUMBER, {value: data}, '', '/type', null, data, schema);\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateString = function validateString(data, schema, dataPointerPath) {\r\n\treturn this.validateStringLength(data, schema, dataPointerPath)\r\n\t\t|| this.validateStringPattern(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n};\r\n\r\nValidatorContext.prototype.validateStringLength = function validateStringLength(data, schema) {\r\n\tif (typeof data !== \"string\") {\r\n\t\treturn null;\r\n\t}\r\n\tif (schema.minLength !== undefined) {\r\n\t\tif (data.length < schema.minLength) {\r\n\t\t\treturn this.createError(ErrorCodes.STRING_LENGTH_SHORT, {length: data.length, minimum: schema.minLength}, '', '/minLength', null, data, schema);\r\n\t\t}\r\n\t}\r\n\tif (schema.maxLength !== undefined) {\r\n\t\tif (data.length > schema.maxLength) {\r\n\t\t\treturn this.createError(ErrorCodes.STRING_LENGTH_LONG, {length: data.length, maximum: schema.maxLength}, '', '/maxLength', null, data, schema);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateStringPattern = function validateStringPattern(data, schema) {\r\n\tif (typeof data !== \"string\" || (typeof schema.pattern !== \"string\" && !(schema.pattern instanceof RegExp))) {\r\n\t\treturn null;\r\n\t}\r\n\tvar regexp;\r\n\tif (schema.pattern instanceof RegExp) {\r\n\t  regexp = schema.pattern;\r\n\t}\r\n\telse {\r\n\t  var body, flags = '';\r\n\t  // Check for regular expression literals\r\n\t  // @see http://www.ecma-international.org/ecma-262/5.1/#sec-7.8.5\r\n\t  var literal = schema.pattern.match(/^\\/(.+)\\/([img]*)$/);\r\n\t  if (literal) {\r\n\t    body = literal[1];\r\n\t    flags = literal[2];\r\n\t  }\r\n\t  else {\r\n\t    body = schema.pattern;\r\n\t  }\r\n\t  regexp = new RegExp(body, flags);\r\n\t}\r\n\tif (!regexp.test(data)) {\r\n\t\treturn this.createError(ErrorCodes.STRING_PATTERN, {pattern: schema.pattern}, '', '/pattern', null, data, schema);\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateArray = function validateArray(data, schema, dataPointerPath) {\r\n\tif (!Array.isArray(data)) {\r\n\t\treturn null;\r\n\t}\r\n\treturn this.validateArrayLength(data, schema, dataPointerPath)\r\n\t\t|| this.validateArrayUniqueItems(data, schema, dataPointerPath)\r\n\t\t|| this.validateArrayItems(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n};\r\n\r\nValidatorContext.prototype.validateArrayLength = function validateArrayLength(data, schema) {\r\n\tvar error;\r\n\tif (schema.minItems !== undefined) {\r\n\t\tif (data.length < schema.minItems) {\r\n\t\t\terror = this.createError(ErrorCodes.ARRAY_LENGTH_SHORT, {length: data.length, minimum: schema.minItems}, '', '/minItems', null, data, schema);\r\n\t\t\tif (this.handleError(error)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (schema.maxItems !== undefined) {\r\n\t\tif (data.length > schema.maxItems) {\r\n\t\t\terror = this.createError(ErrorCodes.ARRAY_LENGTH_LONG, {length: data.length, maximum: schema.maxItems}, '', '/maxItems', null, data, schema);\r\n\t\t\tif (this.handleError(error)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateArrayUniqueItems = function validateArrayUniqueItems(data, schema) {\r\n\tif (schema.uniqueItems) {\r\n\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\tfor (var j = i + 1; j < data.length; j++) {\r\n\t\t\t\tif (recursiveCompare(data[i], data[j])) {\r\n\t\t\t\t\tvar error = this.createError(ErrorCodes.ARRAY_UNIQUE, {match1: i, match2: j}, '', '/uniqueItems', null, data, schema);\r\n\t\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateArrayItems = function validateArrayItems(data, schema, dataPointerPath) {\r\n\tif (schema.items === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar error, i;\r\n\tif (Array.isArray(schema.items)) {\r\n\t\tfor (i = 0; i < data.length; i++) {\r\n\t\t\tif (i < schema.items.length) {\r\n\t\t\t\tif (error = this.validateAll(data[i], schema.items[i], [i], [\"items\", i], dataPointerPath + \"/\" + i)) {\r\n\t\t\t\t\treturn error;\r\n\t\t\t\t}\r\n\t\t\t} else if (schema.additionalItems !== undefined) {\r\n\t\t\t\tif (typeof schema.additionalItems === \"boolean\") {\r\n\t\t\t\t\tif (!schema.additionalItems) {\r\n\t\t\t\t\t\terror = (this.createError(ErrorCodes.ARRAY_ADDITIONAL_ITEMS, {}, '/' + i, '/additionalItems', null, data, schema));\r\n\t\t\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (error = this.validateAll(data[i], schema.additionalItems, [i], [\"additionalItems\"], dataPointerPath + \"/\" + i)) {\r\n\t\t\t\t\treturn error;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\tfor (i = 0; i < data.length; i++) {\r\n\t\t\tif (error = this.validateAll(data[i], schema.items, [i], [\"items\"], dataPointerPath + \"/\" + i)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateObject = function validateObject(data, schema, dataPointerPath) {\r\n\tif (typeof data !== \"object\" || data === null || Array.isArray(data)) {\r\n\t\treturn null;\r\n\t}\r\n\treturn this.validateObjectMinMaxProperties(data, schema, dataPointerPath)\r\n\t\t|| this.validateObjectRequiredProperties(data, schema, dataPointerPath)\r\n\t\t|| this.validateObjectProperties(data, schema, dataPointerPath)\r\n\t\t|| this.validateObjectDependencies(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n};\r\n\r\nValidatorContext.prototype.validateObjectMinMaxProperties = function validateObjectMinMaxProperties(data, schema) {\r\n\tvar keys = Object.keys(data);\r\n\tvar error;\r\n\tif (schema.minProperties !== undefined) {\r\n\t\tif (keys.length < schema.minProperties) {\r\n\t\t\terror = this.createError(ErrorCodes.OBJECT_PROPERTIES_MINIMUM, {propertyCount: keys.length, minimum: schema.minProperties}, '', '/minProperties', null, data, schema);\r\n\t\t\tif (this.handleError(error)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (schema.maxProperties !== undefined) {\r\n\t\tif (keys.length > schema.maxProperties) {\r\n\t\t\terror = this.createError(ErrorCodes.OBJECT_PROPERTIES_MAXIMUM, {propertyCount: keys.length, maximum: schema.maxProperties}, '', '/maxProperties', null, data, schema);\r\n\t\t\tif (this.handleError(error)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateObjectRequiredProperties = function validateObjectRequiredProperties(data, schema) {\r\n\tif (schema.required !== undefined) {\r\n\t\tfor (var i = 0; i < schema.required.length; i++) {\r\n\t\t\tvar key = schema.required[i];\r\n\t\t\tif (data[key] === undefined) {\r\n\t\t\t\tvar error = this.createError(ErrorCodes.OBJECT_REQUIRED, {key: key}, '', '/required/' + i, null, data, schema);\r\n\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\treturn error;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateObjectProperties = function validateObjectProperties(data, schema, dataPointerPath) {\r\n\tvar error;\r\n\tfor (var key in data) {\r\n\t\tvar keyPointerPath = dataPointerPath + \"/\" + key.replace(/~/g, '~0').replace(/\\//g, '~1');\r\n\t\tvar foundMatch = false;\r\n\t\tif (schema.properties !== undefined && schema.properties[key] !== undefined) {\r\n\t\t\tfoundMatch = true;\r\n\t\t\tif (error = this.validateAll(data[key], schema.properties[key], [key], [\"properties\", key], keyPointerPath)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (schema.patternProperties !== undefined) {\r\n\t\t\tfor (var patternKey in schema.patternProperties) {\r\n\t\t\t\tvar regexp = new RegExp(patternKey);\r\n\t\t\t\tif (regexp.test(key)) {\r\n\t\t\t\t\tfoundMatch = true;\r\n\t\t\t\t\tif (error = this.validateAll(data[key], schema.patternProperties[patternKey], [key], [\"patternProperties\", patternKey], keyPointerPath)) {\r\n\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!foundMatch) {\r\n\t\t\tif (schema.additionalProperties !== undefined) {\r\n\t\t\t\tif (this.trackUnknownProperties) {\r\n\t\t\t\t\tthis.knownPropertyPaths[keyPointerPath] = true;\r\n\t\t\t\t\tdelete this.unknownPropertyPaths[keyPointerPath];\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof schema.additionalProperties === \"boolean\") {\r\n\t\t\t\t\tif (!schema.additionalProperties) {\r\n\t\t\t\t\t\terror = this.createError(ErrorCodes.OBJECT_ADDITIONAL_PROPERTIES, {key: key}, '', '/additionalProperties', null, data, schema).prefixWith(key, null);\r\n\t\t\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (error = this.validateAll(data[key], schema.additionalProperties, [key], [\"additionalProperties\"], keyPointerPath)) {\r\n\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (this.trackUnknownProperties && !this.knownPropertyPaths[keyPointerPath]) {\r\n\t\t\t\tthis.unknownPropertyPaths[keyPointerPath] = true;\r\n\t\t\t}\r\n\t\t} else if (this.trackUnknownProperties) {\r\n\t\t\tthis.knownPropertyPaths[keyPointerPath] = true;\r\n\t\t\tdelete this.unknownPropertyPaths[keyPointerPath];\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateObjectDependencies = function validateObjectDependencies(data, schema, dataPointerPath) {\r\n\tvar error;\r\n\tif (schema.dependencies !== undefined) {\r\n\t\tfor (var depKey in schema.dependencies) {\r\n\t\t\tif (data[depKey] !== undefined) {\r\n\t\t\t\tvar dep = schema.dependencies[depKey];\r\n\t\t\t\tif (typeof dep === \"string\") {\r\n\t\t\t\t\tif (data[dep] === undefined) {\r\n\t\t\t\t\t\terror = this.createError(ErrorCodes.OBJECT_DEPENDENCY_KEY, {key: depKey, missing: dep}, '', '', null, data, schema).prefixWith(null, depKey).prefixWith(null, \"dependencies\");\r\n\t\t\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (Array.isArray(dep)) {\r\n\t\t\t\t\tfor (var i = 0; i < dep.length; i++) {\r\n\t\t\t\t\t\tvar requiredKey = dep[i];\r\n\t\t\t\t\t\tif (data[requiredKey] === undefined) {\r\n\t\t\t\t\t\t\terror = this.createError(ErrorCodes.OBJECT_DEPENDENCY_KEY, {key: depKey, missing: requiredKey}, '', '/' + i, null, data, schema).prefixWith(null, depKey).prefixWith(null, \"dependencies\");\r\n\t\t\t\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (error = this.validateAll(data, dep, [], [\"dependencies\", depKey], dataPointerPath)) {\r\n\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateCombinations = function validateCombinations(data, schema, dataPointerPath) {\r\n\treturn this.validateAllOf(data, schema, dataPointerPath)\r\n\t\t|| this.validateAnyOf(data, schema, dataPointerPath)\r\n\t\t|| this.validateOneOf(data, schema, dataPointerPath)\r\n\t\t|| this.validateNot(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n};\r\n\r\nValidatorContext.prototype.validateAllOf = function validateAllOf(data, schema, dataPointerPath) {\r\n\tif (schema.allOf === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar error;\r\n\tfor (var i = 0; i < schema.allOf.length; i++) {\r\n\t\tvar subSchema = schema.allOf[i];\r\n\t\tif (error = this.validateAll(data, subSchema, [], [\"allOf\", i], dataPointerPath)) {\r\n\t\t\treturn error;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateAnyOf = function validateAnyOf(data, schema, dataPointerPath) {\r\n\tif (schema.anyOf === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar errors = [];\r\n\tvar startErrorCount = this.errors.length;\r\n\tvar oldUnknownPropertyPaths, oldKnownPropertyPaths;\r\n\tif (this.trackUnknownProperties) {\r\n\t\toldUnknownPropertyPaths = this.unknownPropertyPaths;\r\n\t\toldKnownPropertyPaths = this.knownPropertyPaths;\r\n\t}\r\n\tvar errorAtEnd = true;\r\n\tfor (var i = 0; i < schema.anyOf.length; i++) {\r\n\t\tif (this.trackUnknownProperties) {\r\n\t\t\tthis.unknownPropertyPaths = {};\r\n\t\t\tthis.knownPropertyPaths = {};\r\n\t\t}\r\n\t\tvar subSchema = schema.anyOf[i];\r\n\r\n\t\tvar errorCount = this.errors.length;\r\n\t\tvar error = this.validateAll(data, subSchema, [], [\"anyOf\", i], dataPointerPath);\r\n\r\n\t\tif (error === null && errorCount === this.errors.length) {\r\n\t\t\tthis.errors = this.errors.slice(0, startErrorCount);\r\n\r\n\t\t\tif (this.trackUnknownProperties) {\r\n\t\t\t\tfor (var knownKey in this.knownPropertyPaths) {\r\n\t\t\t\t\toldKnownPropertyPaths[knownKey] = true;\r\n\t\t\t\t\tdelete oldUnknownPropertyPaths[knownKey];\r\n\t\t\t\t}\r\n\t\t\t\tfor (var unknownKey in this.unknownPropertyPaths) {\r\n\t\t\t\t\tif (!oldKnownPropertyPaths[unknownKey]) {\r\n\t\t\t\t\t\toldUnknownPropertyPaths[unknownKey] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// We need to continue looping so we catch all the property definitions, but we don't want to return an error\r\n\t\t\t\terrorAtEnd = false;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (error) {\r\n\t\t\terrors.push(error.prefixWith(null, \"\" + i).prefixWith(null, \"anyOf\"));\r\n\t\t}\r\n\t}\r\n\tif (this.trackUnknownProperties) {\r\n\t\tthis.unknownPropertyPaths = oldUnknownPropertyPaths;\r\n\t\tthis.knownPropertyPaths = oldKnownPropertyPaths;\r\n\t}\r\n\tif (errorAtEnd) {\r\n\t\terrors = errors.concat(this.errors.slice(startErrorCount));\r\n\t\tthis.errors = this.errors.slice(0, startErrorCount);\r\n\t\treturn this.createError(ErrorCodes.ANY_OF_MISSING, {}, \"\", \"/anyOf\", errors, data, schema);\r\n\t}\r\n};\r\n\r\nValidatorContext.prototype.validateOneOf = function validateOneOf(data, schema, dataPointerPath) {\r\n\tif (schema.oneOf === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar validIndex = null;\r\n\tvar errors = [];\r\n\tvar startErrorCount = this.errors.length;\r\n\tvar oldUnknownPropertyPaths, oldKnownPropertyPaths;\r\n\tif (this.trackUnknownProperties) {\r\n\t\toldUnknownPropertyPaths = this.unknownPropertyPaths;\r\n\t\toldKnownPropertyPaths = this.knownPropertyPaths;\r\n\t}\r\n\tfor (var i = 0; i < schema.oneOf.length; i++) {\r\n\t\tif (this.trackUnknownProperties) {\r\n\t\t\tthis.unknownPropertyPaths = {};\r\n\t\t\tthis.knownPropertyPaths = {};\r\n\t\t}\r\n\t\tvar subSchema = schema.oneOf[i];\r\n\r\n\t\tvar errorCount = this.errors.length;\r\n\t\tvar error = this.validateAll(data, subSchema, [], [\"oneOf\", i], dataPointerPath);\r\n\r\n\t\tif (error === null && errorCount === this.errors.length) {\r\n\t\t\tif (validIndex === null) {\r\n\t\t\t\tvalidIndex = i;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errors = this.errors.slice(0, startErrorCount);\r\n\t\t\t\treturn this.createError(ErrorCodes.ONE_OF_MULTIPLE, {index1: validIndex, index2: i}, \"\", \"/oneOf\", null, data, schema);\r\n\t\t\t}\r\n\t\t\tif (this.trackUnknownProperties) {\r\n\t\t\t\tfor (var knownKey in this.knownPropertyPaths) {\r\n\t\t\t\t\toldKnownPropertyPaths[knownKey] = true;\r\n\t\t\t\t\tdelete oldUnknownPropertyPaths[knownKey];\r\n\t\t\t\t}\r\n\t\t\t\tfor (var unknownKey in this.unknownPropertyPaths) {\r\n\t\t\t\t\tif (!oldKnownPropertyPaths[unknownKey]) {\r\n\t\t\t\t\t\toldUnknownPropertyPaths[unknownKey] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (error) {\r\n\t\t\terrors.push(error);\r\n\t\t}\r\n\t}\r\n\tif (this.trackUnknownProperties) {\r\n\t\tthis.unknownPropertyPaths = oldUnknownPropertyPaths;\r\n\t\tthis.knownPropertyPaths = oldKnownPropertyPaths;\r\n\t}\r\n\tif (validIndex === null) {\r\n\t\terrors = errors.concat(this.errors.slice(startErrorCount));\r\n\t\tthis.errors = this.errors.slice(0, startErrorCount);\r\n\t\treturn this.createError(ErrorCodes.ONE_OF_MISSING, {}, \"\", \"/oneOf\", errors, data, schema);\r\n\t} else {\r\n\t\tthis.errors = this.errors.slice(0, startErrorCount);\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateNot = function validateNot(data, schema, dataPointerPath) {\r\n\tif (schema.not === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar oldErrorCount = this.errors.length;\r\n\tvar oldUnknownPropertyPaths, oldKnownPropertyPaths;\r\n\tif (this.trackUnknownProperties) {\r\n\t\toldUnknownPropertyPaths = this.unknownPropertyPaths;\r\n\t\toldKnownPropertyPaths = this.knownPropertyPaths;\r\n\t\tthis.unknownPropertyPaths = {};\r\n\t\tthis.knownPropertyPaths = {};\r\n\t}\r\n\tvar error = this.validateAll(data, schema.not, null, null, dataPointerPath);\r\n\tvar notErrors = this.errors.slice(oldErrorCount);\r\n\tthis.errors = this.errors.slice(0, oldErrorCount);\r\n\tif (this.trackUnknownProperties) {\r\n\t\tthis.unknownPropertyPaths = oldUnknownPropertyPaths;\r\n\t\tthis.knownPropertyPaths = oldKnownPropertyPaths;\r\n\t}\r\n\tif (error === null && notErrors.length === 0) {\r\n\t\treturn this.createError(ErrorCodes.NOT_PASSED, {}, \"\", \"/not\", null, data, schema);\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateHypermedia = function validateCombinations(data, schema, dataPointerPath) {\r\n\tif (!schema.links) {\r\n\t\treturn null;\r\n\t}\r\n\tvar error;\r\n\tfor (var i = 0; i < schema.links.length; i++) {\r\n\t\tvar ldo = schema.links[i];\r\n\t\tif (ldo.rel === \"describedby\") {\r\n\t\t\tvar template = new UriTemplate(ldo.href);\r\n\t\t\tvar allPresent = true;\r\n\t\t\tfor (var j = 0; j < template.varNames.length; j++) {\r\n\t\t\t\tif (!(template.varNames[j] in data)) {\r\n\t\t\t\t\tallPresent = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (allPresent) {\r\n\t\t\t\tvar schemaUrl = template.fillFromObject(data);\r\n\t\t\t\tvar subSchema = {\"$ref\": schemaUrl};\r\n\t\t\t\tif (error = this.validateAll(data, subSchema, [], [\"links\", i], dataPointerPath)) {\r\n\t\t\t\t\treturn error;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// parseURI() and resolveUrl() are from https://gist.github.com/1088850\r\n//   -  released as public domain by author (\"Yaffle\") - see comments on gist\r\n\r\nfunction parseURI(url) {\r\n\tvar m = String(url).replace(/^\\s+|\\s+$/g, '').match(/^([^:\\/?#]+:)?(\\/\\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\\/?#]*)(?::(\\d*))?))?([^?#]*)(\\?[^#]*)?(#[\\s\\S]*)?/);\r\n\t// authority = '//' + user + ':' + pass '@' + hostname + ':' port\r\n\treturn (m ? {\r\n\t\thref     : m[0] || '',\r\n\t\tprotocol : m[1] || '',\r\n\t\tauthority: m[2] || '',\r\n\t\thost     : m[3] || '',\r\n\t\thostname : m[4] || '',\r\n\t\tport     : m[5] || '',\r\n\t\tpathname : m[6] || '',\r\n\t\tsearch   : m[7] || '',\r\n\t\thash     : m[8] || ''\r\n\t} : null);\r\n}\r\n\r\nfunction resolveUrl(base, href) {// RFC 3986\r\n\r\n\tfunction removeDotSegments(input) {\r\n\t\tvar output = [];\r\n\t\tinput.replace(/^(\\.\\.?(\\/|$))+/, '')\r\n\t\t\t.replace(/\\/(\\.(\\/|$))+/g, '/')\r\n\t\t\t.replace(/\\/\\.\\.$/, '/../')\r\n\t\t\t.replace(/\\/?[^\\/]*/g, function (p) {\r\n\t\t\t\tif (p === '/..') {\r\n\t\t\t\t\toutput.pop();\r\n\t\t\t\t} else {\r\n\t\t\t\t\toutput.push(p);\r\n\t\t\t\t}\r\n\t\t});\r\n\t\treturn output.join('').replace(/^\\//, input.charAt(0) === '/' ? '/' : '');\r\n\t}\r\n\r\n\thref = parseURI(href || '');\r\n\tbase = parseURI(base || '');\r\n\r\n\treturn !href || !base ? null : (href.protocol || base.protocol) +\r\n\t\t(href.protocol || href.authority ? href.authority : base.authority) +\r\n\t\tremoveDotSegments(href.protocol || href.authority || href.pathname.charAt(0) === '/' ? href.pathname : (href.pathname ? ((base.authority && !base.pathname ? '/' : '') + base.pathname.slice(0, base.pathname.lastIndexOf('/') + 1) + href.pathname) : base.pathname)) +\r\n\t\t(href.protocol || href.authority || href.pathname ? href.search : (href.search || base.search)) +\r\n\t\thref.hash;\r\n}\r\n\r\nfunction getDocumentUri(uri) {\r\n\treturn uri.split('#')[0];\r\n}\r\nfunction normSchema(schema, baseUri) {\r\n\tif (schema && typeof schema === \"object\") {\r\n\t\tif (baseUri === undefined) {\r\n\t\t\tbaseUri = schema.id;\r\n\t\t} else if (typeof schema.id === \"string\") {\r\n\t\t\tbaseUri = resolveUrl(baseUri, schema.id);\r\n\t\t\tschema.id = baseUri;\r\n\t\t}\r\n\t\tif (Array.isArray(schema)) {\r\n\t\t\tfor (var i = 0; i < schema.length; i++) {\r\n\t\t\t\tnormSchema(schema[i], baseUri);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (typeof schema['$ref'] === \"string\") {\r\n\t\t\t\tschema['$ref'] = resolveUrl(baseUri, schema['$ref']);\r\n\t\t\t}\r\n\t\t\tfor (var key in schema) {\r\n\t\t\t\tif (key !== \"enum\") {\r\n\t\t\t\t\tnormSchema(schema[key], baseUri);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction defaultErrorReporter(language) {\r\n\tlanguage = language || 'en';\r\n\r\n\tvar errorMessages = languages[language];\r\n\r\n\treturn function (error) {\r\n\t\tvar messageTemplate = errorMessages[error.code] || ErrorMessagesDefault[error.code];\r\n\t\tif (typeof messageTemplate !== 'string') {\r\n\t\t\treturn \"Unknown error code \" + error.code + \": \" + JSON.stringify(error.messageParams);\r\n\t\t}\r\n\t\tvar messageParams = error.params;\r\n\t\t// Adapted from Crockford's supplant()\r\n\t\treturn messageTemplate.replace(/\\{([^{}]*)\\}/g, function (whole, varName) {\r\n\t\t\tvar subValue = messageParams[varName];\r\n\t\t\treturn typeof subValue === 'string' || typeof subValue === 'number' ? subValue : whole;\r\n\t\t});\r\n\t};\r\n}\r\n\r\nvar ErrorCodes = {\r\n\tINVALID_TYPE: 0,\r\n\tENUM_MISMATCH: 1,\r\n\tANY_OF_MISSING: 10,\r\n\tONE_OF_MISSING: 11,\r\n\tONE_OF_MULTIPLE: 12,\r\n\tNOT_PASSED: 13,\r\n\t// Numeric errors\r\n\tNUMBER_MULTIPLE_OF: 100,\r\n\tNUMBER_MINIMUM: 101,\r\n\tNUMBER_MINIMUM_EXCLUSIVE: 102,\r\n\tNUMBER_MAXIMUM: 103,\r\n\tNUMBER_MAXIMUM_EXCLUSIVE: 104,\r\n\tNUMBER_NOT_A_NUMBER: 105,\r\n\t// String errors\r\n\tSTRING_LENGTH_SHORT: 200,\r\n\tSTRING_LENGTH_LONG: 201,\r\n\tSTRING_PATTERN: 202,\r\n\t// Object errors\r\n\tOBJECT_PROPERTIES_MINIMUM: 300,\r\n\tOBJECT_PROPERTIES_MAXIMUM: 301,\r\n\tOBJECT_REQUIRED: 302,\r\n\tOBJECT_ADDITIONAL_PROPERTIES: 303,\r\n\tOBJECT_DEPENDENCY_KEY: 304,\r\n\t// Array errors\r\n\tARRAY_LENGTH_SHORT: 400,\r\n\tARRAY_LENGTH_LONG: 401,\r\n\tARRAY_UNIQUE: 402,\r\n\tARRAY_ADDITIONAL_ITEMS: 403,\r\n\t// Custom/user-defined errors\r\n\tFORMAT_CUSTOM: 500,\r\n\tKEYWORD_CUSTOM: 501,\r\n\t// Schema structure\r\n\tCIRCULAR_REFERENCE: 600,\r\n\t// Non-standard validation options\r\n\tUNKNOWN_PROPERTY: 1000\r\n};\r\nvar ErrorCodeLookup = {};\r\nfor (var key in ErrorCodes) {\r\n\tErrorCodeLookup[ErrorCodes[key]] = key;\r\n}\r\nvar ErrorMessagesDefault = {\r\n\tINVALID_TYPE: \"Invalid type: {type} (expected {expected})\",\r\n\tENUM_MISMATCH: \"No enum match for: {value}\",\r\n\tANY_OF_MISSING: \"Data does not match any schemas from \\\"anyOf\\\"\",\r\n\tONE_OF_MISSING: \"Data does not match any schemas from \\\"oneOf\\\"\",\r\n\tONE_OF_MULTIPLE: \"Data is valid against more than one schema from \\\"oneOf\\\": indices {index1} and {index2}\",\r\n\tNOT_PASSED: \"Data matches schema from \\\"not\\\"\",\r\n\t// Numeric errors\r\n\tNUMBER_MULTIPLE_OF: \"Value {value} is not a multiple of {multipleOf}\",\r\n\tNUMBER_MINIMUM: \"Value {value} is less than minimum {minimum}\",\r\n\tNUMBER_MINIMUM_EXCLUSIVE: \"Value {value} is equal to exclusive minimum {minimum}\",\r\n\tNUMBER_MAXIMUM: \"Value {value} is greater than maximum {maximum}\",\r\n\tNUMBER_MAXIMUM_EXCLUSIVE: \"Value {value} is equal to exclusive maximum {maximum}\",\r\n\tNUMBER_NOT_A_NUMBER: \"Value {value} is not a valid number\",\r\n\t// String errors\r\n\tSTRING_LENGTH_SHORT: \"String is too short ({length} chars), minimum {minimum}\",\r\n\tSTRING_LENGTH_LONG: \"String is too long ({length} chars), maximum {maximum}\",\r\n\tSTRING_PATTERN: \"String does not match pattern: {pattern}\",\r\n\t// Object errors\r\n\tOBJECT_PROPERTIES_MINIMUM: \"Too few properties defined ({propertyCount}), minimum {minimum}\",\r\n\tOBJECT_PROPERTIES_MAXIMUM: \"Too many properties defined ({propertyCount}), maximum {maximum}\",\r\n\tOBJECT_REQUIRED: \"Missing required property: {key}\",\r\n\tOBJECT_ADDITIONAL_PROPERTIES: \"Additional properties not allowed\",\r\n\tOBJECT_DEPENDENCY_KEY: \"Dependency failed - key must exist: {missing} (due to key: {key})\",\r\n\t// Array errors\r\n\tARRAY_LENGTH_SHORT: \"Array is too short ({length}), minimum {minimum}\",\r\n\tARRAY_LENGTH_LONG: \"Array is too long ({length}), maximum {maximum}\",\r\n\tARRAY_UNIQUE: \"Array items are not unique (indices {match1} and {match2})\",\r\n\tARRAY_ADDITIONAL_ITEMS: \"Additional items not allowed\",\r\n\t// Format errors\r\n\tFORMAT_CUSTOM: \"Format validation failed ({message})\",\r\n\tKEYWORD_CUSTOM: \"Keyword failed: {key} ({message})\",\r\n\t// Schema structure\r\n\tCIRCULAR_REFERENCE: \"Circular $refs: {urls}\",\r\n\t// Non-standard validation options\r\n\tUNKNOWN_PROPERTY: \"Unknown property (not in schema)\"\r\n};\r\n\r\nfunction ValidationError(code, params, dataPath, schemaPath, subErrors) {\r\n\tError.call(this);\r\n\tif (code === undefined) {\r\n\t\tthrow new Error (\"No error code supplied: \" + schemaPath);\r\n\t}\r\n\tthis.message = '';\r\n\tthis.params = params;\r\n\tthis.code = code;\r\n\tthis.dataPath = dataPath || \"\";\r\n\tthis.schemaPath = schemaPath || \"\";\r\n\tthis.subErrors = subErrors || null;\r\n\r\n\tvar err = new Error(this.message);\r\n\tthis.stack = err.stack || err.stacktrace;\r\n\tif (!this.stack) {\r\n\t\ttry {\r\n\t\t\tthrow err;\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tthis.stack = err.stack || err.stacktrace;\r\n\t\t}\r\n\t}\r\n}\r\nValidationError.prototype = Object.create(Error.prototype);\r\nValidationError.prototype.constructor = ValidationError;\r\nValidationError.prototype.name = 'ValidationError';\r\n\r\nValidationError.prototype.prefixWith = function (dataPrefix, schemaPrefix) {\r\n\tif (dataPrefix !== null) {\r\n\t\tdataPrefix = dataPrefix.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\r\n\t\tthis.dataPath = \"/\" + dataPrefix + this.dataPath;\r\n\t}\r\n\tif (schemaPrefix !== null) {\r\n\t\tschemaPrefix = schemaPrefix.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\r\n\t\tthis.schemaPath = \"/\" + schemaPrefix + this.schemaPath;\r\n\t}\r\n\tif (this.subErrors !== null) {\r\n\t\tfor (var i = 0; i < this.subErrors.length; i++) {\r\n\t\t\tthis.subErrors[i].prefixWith(dataPrefix, schemaPrefix);\r\n\t\t}\r\n\t}\r\n\treturn this;\r\n};\r\n\r\nfunction isTrustedUrl(baseUrl, testUrl) {\r\n\tif(testUrl.substring(0, baseUrl.length) === baseUrl){\r\n\t\tvar remainder = testUrl.substring(baseUrl.length);\r\n\t\tif ((testUrl.length > 0 && testUrl.charAt(baseUrl.length - 1) === \"/\")\r\n\t\t\t|| remainder.charAt(0) === \"#\"\r\n\t\t\t|| remainder.charAt(0) === \"?\") {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nvar languages = {};\r\nfunction createApi(language) {\r\n\tvar globalContext = new ValidatorContext();\r\n\tvar currentLanguage;\r\n\tvar customErrorReporter;\r\n\tvar api = {\r\n\t\tsetErrorReporter: function (reporter) {\r\n\t\t\tif (typeof reporter === 'string') {\r\n\t\t\t\treturn this.language(reporter);\r\n\t\t\t}\r\n\t\t\tcustomErrorReporter = reporter;\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\taddFormat: function () {\r\n\t\t\tglobalContext.addFormat.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tlanguage: function (code) {\r\n\t\t\tif (!code) {\r\n\t\t\t\treturn currentLanguage;\r\n\t\t\t}\r\n\t\t\tif (!languages[code]) {\r\n\t\t\t\tcode = code.split('-')[0]; // fall back to base language\r\n\t\t\t}\r\n\t\t\tif (languages[code]) {\r\n\t\t\t\tcurrentLanguage = code;\r\n\t\t\t\treturn code; // so you can tell if fall-back has happened\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\taddLanguage: function (code, messageMap) {\r\n\t\t\tvar key;\r\n\t\t\tfor (key in ErrorCodes) {\r\n\t\t\t\tif (messageMap[key] && !messageMap[ErrorCodes[key]]) {\r\n\t\t\t\t\tmessageMap[ErrorCodes[key]] = messageMap[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar rootCode = code.split('-')[0];\r\n\t\t\tif (!languages[rootCode]) { // use for base language if not yet defined\r\n\t\t\t\tlanguages[code] = messageMap;\r\n\t\t\t\tlanguages[rootCode] = messageMap;\r\n\t\t\t} else {\r\n\t\t\t\tlanguages[code] = Object.create(languages[rootCode]);\r\n\t\t\t\tfor (key in messageMap) {\r\n\t\t\t\t\tif (typeof languages[rootCode][key] === 'undefined') {\r\n\t\t\t\t\t\tlanguages[rootCode][key] = messageMap[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlanguages[code][key] = messageMap[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tfreshApi: function (language) {\r\n\t\t\tvar result = createApi();\r\n\t\t\tif (language) {\r\n\t\t\t\tresult.language(language);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tvalidate: function (data, schema, checkRecursive, banUnknownProperties) {\r\n\t\t\tvar def = defaultErrorReporter(currentLanguage);\r\n\t\t\tvar errorReporter = customErrorReporter ? function (error, data, schema) {\r\n\t\t\t\treturn customErrorReporter(error, data, schema) || def(error, data, schema);\r\n\t\t\t} : def;\r\n\t\t\tvar context = new ValidatorContext(globalContext, false, errorReporter, checkRecursive, banUnknownProperties);\r\n\t\t\tif (typeof schema === \"string\") {\r\n\t\t\t\tschema = {\"$ref\": schema};\r\n\t\t\t}\r\n\t\t\tcontext.addSchema(\"\", schema);\r\n\t\t\tvar error = context.validateAll(data, schema, null, null, \"\");\r\n\t\t\tif (!error && banUnknownProperties) {\r\n\t\t\t\terror = context.banUnknownProperties(data, schema);\r\n\t\t\t}\r\n\t\t\tthis.error = error;\r\n\t\t\tthis.missing = context.missing;\r\n\t\t\tthis.valid = (error === null);\r\n\t\t\treturn this.valid;\r\n\t\t},\r\n\t\tvalidateResult: function () {\r\n\t\t\tvar result = {toString: function () {\r\n\t\t\t\treturn this.valid ? 'valid' : this.error.message;\r\n\t\t\t}};\r\n\t\t\tthis.validate.apply(result, arguments);\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tvalidateMultiple: function (data, schema, checkRecursive, banUnknownProperties) {\r\n\t\t\tvar def = defaultErrorReporter(currentLanguage);\r\n\t\t\tvar errorReporter = customErrorReporter ? function (error, data, schema) {\r\n\t\t\t\treturn customErrorReporter(error, data, schema) || def(error, data, schema);\r\n\t\t\t} : def;\r\n\t\t\tvar context = new ValidatorContext(globalContext, true, errorReporter, checkRecursive, banUnknownProperties);\r\n\t\t\tif (typeof schema === \"string\") {\r\n\t\t\t\tschema = {\"$ref\": schema};\r\n\t\t\t}\r\n\t\t\tcontext.addSchema(\"\", schema);\r\n\t\t\tcontext.validateAll(data, schema, null, null, \"\");\r\n\t\t\tif (banUnknownProperties) {\r\n\t\t\t\tcontext.banUnknownProperties(data, schema);\r\n\t\t\t}\r\n\t\t\tvar result = {toString: function () {\r\n\t\t\t\treturn this.valid ? 'valid' : this.error.message;\r\n\t\t\t}};\r\n\t\t\tresult.errors = context.errors;\r\n\t\t\tresult.missing = context.missing;\r\n\t\t\tresult.valid = (result.errors.length === 0);\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\taddSchema: function () {\r\n\t\t\treturn globalContext.addSchema.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tgetSchema: function () {\r\n\t\t\treturn globalContext.getSchema.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tgetSchemaMap: function () {\r\n\t\t\treturn globalContext.getSchemaMap.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tgetSchemaUris: function () {\r\n\t\t\treturn globalContext.getSchemaUris.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tgetMissingUris: function () {\r\n\t\t\treturn globalContext.getMissingUris.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tdropSchemas: function () {\r\n\t\t\tglobalContext.dropSchemas.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tdefineKeyword: function () {\r\n\t\t\tglobalContext.defineKeyword.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tdefineError: function (codeName, codeNumber, defaultMessage) {\r\n\t\t\tif (typeof codeName !== 'string' || !/^[A-Z]+(_[A-Z]+)*$/.test(codeName)) {\r\n\t\t\t\tthrow new Error('Code name must be a string in UPPER_CASE_WITH_UNDERSCORES');\r\n\t\t\t}\r\n\t\t\tif (typeof codeNumber !== 'number' || codeNumber%1 !== 0 || codeNumber < 10000) {\r\n\t\t\t\tthrow new Error('Code number must be an integer > 10000');\r\n\t\t\t}\r\n\t\t\tif (typeof ErrorCodes[codeName] !== 'undefined') {\r\n\t\t\t\tthrow new Error('Error already defined: ' + codeName + ' as ' + ErrorCodes[codeName]);\r\n\t\t\t}\r\n\t\t\tif (typeof ErrorCodeLookup[codeNumber] !== 'undefined') {\r\n\t\t\t\tthrow new Error('Error code already used: ' + ErrorCodeLookup[codeNumber] + ' as ' + codeNumber);\r\n\t\t\t}\r\n\t\t\tErrorCodes[codeName] = codeNumber;\r\n\t\t\tErrorCodeLookup[codeNumber] = codeName;\r\n\t\t\tErrorMessagesDefault[codeName] = ErrorMessagesDefault[codeNumber] = defaultMessage;\r\n\t\t\tfor (var langCode in languages) {\r\n\t\t\t\tvar language = languages[langCode];\r\n\t\t\t\tif (language[codeName]) {\r\n\t\t\t\t\tlanguage[codeNumber] = language[codeNumber] || language[codeName];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\treset: function () {\r\n\t\t\tglobalContext.reset();\r\n\t\t\tthis.error = null;\r\n\t\t\tthis.missing = [];\r\n\t\t\tthis.valid = true;\r\n\t\t},\r\n\t\tmissing: [],\r\n\t\terror: null,\r\n\t\tvalid: true,\r\n\t\tnormSchema: normSchema,\r\n\t\tresolveUrl: resolveUrl,\r\n\t\tgetDocumentUri: getDocumentUri,\r\n\t\terrorCodes: ErrorCodes\r\n\t};\r\n\tapi.language(language || 'en');\r\n\treturn api;\r\n}\r\n\r\nvar tv4 = createApi();\r\ntv4.addLanguage('en-gb', ErrorMessagesDefault);\r\n\r\n//legacy property\r\ntv4.tv4 = tv4;\r\n\r\nreturn tv4; // used by _header.js to globalise.\r\n\r\n}));","import tv4, {JsonSchema} from \"tv4\";\nimport {Readable, Writable, derived, writable} from \"svelte/store\";\n\nimport {IJSONType} from \"../../util/shared/builtin\";\nimport {IStoreStartStopNotifier, is_readable, is_writable} from \"../../util/shared/stores\";\n\nimport {overlay} from \"./overlay\";\n\n/**\n * Returns a `Readable` / `Writable` Svelte Store, that validates values set to the Store, and retrieved via subscriptions, against a JSON Schema\n *\n * **NOTE**: If a non-Store value is passed as `store`, then it will be wrapped in a `Writable` Store\n *\n * ```javascript\n * import {schema} from \"svelte-commons/lib/stores/shared\";\n *\n * // Here, we're defining our JSONSchema that will validate our I/O\n * //\n * // Check out for more information: https://json-schema.org/\n * const person_schema = {\n *     $id: \"https://example.com/person.schema.json\",\n *     $schema: \"http://json-schema.org/draft-07/schema#\",\n *     title: \"Person\",\n *     type: \"object\",\n *     properties: {\n *         firstName: {\n *             type: \"string\",\n *             description: \"The person's first name.\"\n *         },\n *\n *         lastName: {\n *             type: \"string\",\n *             description: \"The person's last name.\"\n *         },\n *\n *         age: {\n *             description: \"Age in years which must be equal to or greater than zero.\",\n *             type: \"integer\",\n *             minimum: 0\n *         }\n *     }\n * };\n *\n * // We need to seed our with an initial value, so here's a sample person\n * const initial_person = {\n *     firstName: \"John\",\n *     lastName: \"Smith\",\n *     age: 32\n * };\n *\n * // Now we just pass our initial data and our JSON Schema in\n * const store = schema(initial_person, person_schema);\n *\n * // To demonstrate changes, we need to log each change\n * store.subscribe(console.log); // logs: `{firstName: \"John\", lastName: \"Smith\", age: 32}`\n *\n * // Here, we're copying our initial \"Person\", then updating its age to `21`\n * store.set({...initial_person, age: 21}); // logs: `{firstName: \"John\", lastName: \"Smith\", age: 21}`\n *\n * // Same as above, but using a negative `.age` to have an exception thrown\n * store.set({...initial_person, age: -60}); // throws exception: `Uncaught TypeError: bad change 'Person/age' to Schema Store (Value -60 is less than minimum 0)`\n * ```\n *\n * @param store\n * @param schema\n * @param start\n */\nexport function schema<T extends IJSONType>(\n    store: T | Readable<T> | Writable<T>,\n    json_schema: JsonSchema,\n    start?: IStoreStartStopNotifier<T>\n): Readable<T> | Writable<T> {\n    // Need to support raw non-Store values being passed, so\n    // we wrap them in a `Writable` Store\n    if (!is_readable(store)) store = writable(store, start);\n\n    function _validate(value: T) {\n        if (tv4.validate(value, json_schema)) return value;\n\n        const {title = \"UntitledSchema\"} = json_schema;\n        const {dataPath, message} = tv4.error;\n\n        throw new TypeError(`bad change '${title}${dataPath}' to Schema Store (${message})`);\n    }\n\n    if (is_writable(store)) return overlay(store, _validate, _validate);\n    return derived(store, _validate);\n}\n","export * from \"./collection\";\nexport * from \"./immutable\";\nexport * from \"./merged\";\nexport * from \"./overlay\";\nexport * from \"./schema\";\n","export * from \"./browser\";\nexport * from \"./shared\";\n","import * as _actions from \"./actions\";\nimport * as _stores from \"./stores\";\nimport * as _util from \"./util\";\n\nexport const actions = _actions;\nexport const stores = _stores;\nexport const util = _util;\n"]}